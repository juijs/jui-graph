!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=jui},function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n),a={name:"util.time",extend:null,component:function(){var t=r.a.include("util.base"),e={MILLISECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,years:"years",months:"months",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds",milliseconds:"milliseconds",weeks:"weeks",diff:function(t,i,n){var r=+i-+n;return"seconds"==t?Math.abs(Math.floor(r/e.MILLISECOND)):"minutes"==t?Math.abs(Math.floor(r/e.MINUTE)):"hours"==t?Math.abs(Math.floor(r/e.HOUR)):"days"==t?Math.abs(Math.floor(r/e.DAY)):r},add:function(t){if(arguments.length<=2)return t;if(arguments.length>2){for(var e=new Date(+t),i=1;i<arguments.length;i+=2){var n="string"==typeof arguments[i]?this[arguments[i]]:arguments[i],r=arguments[i+1];this.years==n?e.setFullYear(e.getFullYear()+r):this.months==n?e.setMonth(e.getMonth()+r):this.days==n?e.setDate(e.getDate()+r):this.hours==n?e.setHours(e.getHours()+r):this.minutes==n?e.setMinutes(e.getMinutes()+r):this.seconds==n?e.setSeconds(e.getSeconds()+r):this.milliseconds==n?e.setMilliseconds(e.getMilliseconds()+r):this.weeks==n&&e.setDate(e.getDate()+7*r)}return e}},format:function(e,i,n){return t.dateFormat(e,i,n)}};return e}},s={name:"util.transform",extend:null,component:function(){var t=r.a.include("util.math");return function(e){function i(i){for(var n=0,r=e.length;n<r;n++)e[n]=t.matrix(i,e[n]);return e}this.matrix=function(){var e=arguments,i=e[0];return"move"==i?[new Float32Array([1,0,e[1]]),new Float32Array([0,1,e[2]]),new Float32Array([0,0,1])]:"scale"==i?[new Float32Array([e[1],0,0]),new Float32Array([0,e[2],0]),new Float32Array([0,0,1])]:"rotate"==i?[new Float32Array([Math.cos(t.radian(e[1])),-Math.sin(t.radian(e[1])),0]),new Float32Array([Math.sin(t.radian(e[1])),Math.cos(t.radian(e[1])),0]),new Float32Array([0,0,1])]:"move3d"==i?[new Float32Array([1,0,0,e[1]]),new Float32Array([0,1,0,e[2]]),new Float32Array([0,0,1,e[3]]),new Float32Array([0,0,0,1])]:"scale3d"==i?[new Float32Array([e[1],0,0,0]),new Float32Array([0,e[2],0,0]),new Float32Array([0,0,e[3],0]),new Float32Array([0,0,0,1])]:"rotate3dz"==i?[new Float32Array([Math.cos(t.radian(e[1])),-Math.sin(t.radian(e[1])),0,0]),new Float32Array([Math.sin(t.radian(e[1])),Math.cos(t.radian(e[1])),0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])]:"rotate3dx"==i?[new Float32Array([1,0,0,0]),new Float32Array([0,Math.cos(t.radian(e[1])),-Math.sin(t.radian(e[1])),0]),new Float32Array([0,Math.sin(t.radian(e[1])),Math.cos(t.radian(e[1])),0]),new Float32Array([0,0,0,1])]:"rotate3dy"==i?[new Float32Array([Math.cos(t.radian(e[1])),0,Math.sin(t.radian(e[1])),0]),new Float32Array([0,1,0,0]),new Float32Array([-Math.sin(t.radian(e[1])),0,Math.cos(t.radian(e[1])),0]),new Float32Array([0,0,0,1])]:void 0},this.move=function(t,e){return i(this.matrix("move",t,e))},this.move3d=function(t,e,n){return i(this.matrix("move3d",t,e,n))},this.scale=function(t,e){return i(this.matrix("scale",t,e))},this.scale3d=function(t,e,n){return i(this.matrix("scale3d",t,e,n))},this.rotate=function(t){return i(this.matrix("rotate",t))},this.rotate3dz=function(t){return i(this.matrix("rotate3dz",t))},this.rotate3dx=function(t){return i(this.matrix("rotate3dx",t))},this.rotate3dy=function(t){return i(this.matrix("rotate3dy",t))},this.custom=function(t){return i(t)},this.merge=function(){for(var e=arguments,n=this.matrix.apply(this,e[0]),r=1;r<e.length;r++)n=t.matrix(n,this.matrix.apply(this,e[r]));return i(n)},this.merge2=function(i){for(var n=0,r=e.length;n<r;n++){for(var a=i.apply(null,e[n]),s=this.matrix.apply(this,a[0]),h=1;h<a.length;h++)s=t.matrix(s,this.matrix.apply(this,a[h]));e[n]=t.matrix(s,e[n])}}}}},h={name:"util.canvas.base",extend:null,component:function(){return function(t){this.clearContext=function(){t.clearRect(0,0,t.canvas.width,t.canvas.height)},this.drawLine=function(e,i,n,r,a,s=1){a=a||"#434d6b",t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.lineWidth=s,t.strokeStyle=a,t.stroke()},this.drawCurve=function(e,i,n,r=.5,a=!1,s=16){t.beginPath();const h=e.reduce((t,e)=>(t.push(e[0],e[1]),t),[]),o=getCurvePoints(h,i,n,r,a,s);t.moveTo(o[0],o[1]);for(let e=2;e<o.length-1;e+=2)t.lineTo(o[e],o[e+1])},this.drawDashedLine=function(e,i,n,r,a,s=[3,3],h=1){a=a||"#434d6b",t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.lineWidth=h,t.strokeStyle=a;const o=t.getLineDash();t.setLineDash(s),t.stroke(),t.setLineDash(o)},this.drawLines=function(e,...i){e=e||"#434d6b",t.beginPath(),t.moveTo(i[0][0],i[0][1]),i.slice(1).map(e=>t.lineTo(e[0],e[1])),t.lineWidth=1,t.strokeStyle=e,t.stroke()},this.drawRoundRect=function(e,i,n,r,a){t.beginPath(),t.moveTo(e,i+a),t.lineTo(e,i+r-a),t.arcTo(e,i+r,e+a,i+r,a),t.lineTo(e+n-a,i+r),t.arcTo(e+n,i+r,e+n,i+r-a,a),t.lineTo(e+n,i+a),t.arcTo(e+n,i,e+n-a,i,a),t.lineTo(e+a,i),t.arcTo(e,i,e,i+a,a),t.closePath()},this.drawFreeRect=function(e,i,n,r,a,s,h,o,c,u=null){c=c||"#ffffff",t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.lineTo(a,s),t.lineTo(h,o),t.closePath(),t.fillStyle=c,null!=u&&(t.lineWidth=2,t.strokeStyle=u,t.stroke()),t.fill()},this.drawFreeRectStroke=function(e,i,n,r,a,s,h,o,c){c=c||"#ffffff",t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.lineTo(a,s),t.lineTo(h,o),t.lineWidth=1,t.strokeStyle=c,t.stroke()},this.drawTriangle=function(e,i,n,r){r=r||"#ffffff",t.beginPath(),t.moveTo(e,i-n),t.lineTo(e-n,i+n),t.lineTo(e+n,i+n),t.closePath(),t.fillStyle=r,t.fill()},this.drawSquare=function(e,i,n,r){r=r||"#ffffff",t.beginPath(),t.moveTo(e-n,i-n),t.lineTo(e-n,i+n),t.lineTo(e+n,i+n),t.lineTo(e+n,i-n),t.closePath(),t.fillStyle=r,t.fill()},this.drawPage=function(e,i,n,r,a=!1){drawFreeRect(t,e+i,n,e+i-20,n+14,e+i-20,n+52,e+i,n+38,r,a?"rgba(255,255,255,0.2)":null)},this.drawCircle=function(e,i,n,r){r=r||"white",n=n||1,t.beginPath(),t.arc(e,i,n,0,2*Math.PI),t.fillStyle=r,t.fill()},this.drawBullet=function(e,i,n=74){let r=t.createLinearGradient(e,i,e+n,i);r.addColorStop(0,"#1074fc"),r.addColorStop(1,"rgba(37, 172, 254, 0)"),t.beginPath(),t.arc(e,i,2,Math.PI/2,Math.PI/2*3),t.lineTo(e+n,i-2),t.lineTo(e+n,i+2),t.closePath(),t.fillStyle=r,t.fill(),t.fillStyle=r},this.getCurvePoints=function(t,e,i,n=.5,r=!1,a=16){var s,h,o,c,u,l,d,f,g,p,m,v,x,y=[],w=[];for(y=t.slice(0),r?(y.unshift(t[t.length-1]),y.unshift(t[t.length-2]),y.unshift(t[t.length-1]),y.unshift(t[t.length-2]),y.push(t[0]),y.push(t[1])):(y.unshift(t[1]),y.unshift(t[0]),y.push(t[t.length-2]),y.push(t[t.length-1])),x=2;x<y.length-4;x+=2)for(v=0;v<=a;v++)o=(y[x+2]-y[x-2])*n,c=(y[x+4]-y[x])*n,u=(y[x+3]-y[x-1])*n,l=(y[x+5]-y[x+1])*n,m=v/a,d=2*Math.pow(m,3)-3*Math.pow(m,2)+1,f=-2*Math.pow(m,3)+3*Math.pow(m,2),g=Math.pow(m,3)-2*Math.pow(m,2)+m,p=Math.pow(m,3)-Math.pow(m,2),s=d*y[x]+f*y[x+2]+g*o+p*c,h=d*y[x+1]+f*y[x+3]+g*u+p*l,w.push(s),h>i?w.push(i):h<e?w.push(e):w.push(h);return w}}}},o={name:"util.svg.element",extend:null,component:function(){var t=function(){var e=[];this.create=function(t,e){this.element=document.createElementNS("http://www.w3.org/2000/svg",t),this.children=[],this.parent=null,this.styles={},this.attributes={},this.order=0,this.attr(e)},this.each=function(t){if("function"==typeof t){for(var e=0,i=this.children.length;e<i;e++){var n=this.children[e];t.apply(n,[e,n])}return this.children}},this.get=function(t){return this.children[t]?this.children[t]:null},this.index=function(t){for(var e=0;e<this.children.length;e++)if(t==this.children[e])return e;return-1},this.append=function(e){return e instanceof t&&(e.parent&&e.remove(),this.children.push(e),e.parent=this),this},this.prepend=function(t){return this.insert(0,t)},this.insert=function(t,e){return e.parent&&e.remove(),this.children.splice(t,0,e),e.parent=this,this},this.remove=function(){for(var t=[],e=this.parent.children,i=0;i<e.length;i++){if(e[i]==this){i;break}t.push(e[i])}return this.parent.children=t,this},this.attr=function(t){if(void 0!==t&&t){if("string"==typeof t)return this.attributes[t]||this.element.getAttribute(t);for(var e in t)this.attributes[e]=t[e],-1!=e.indexOf("xlink:")?this.element.setAttributeNS("http://www.w3.org/1999/xlink",e,t[e]):this.element.setAttribute(e,t[e]);return this}},this.css=function(t){var e=[];for(var i in t)this.styles[i]=t[i];for(var i in t)e.push(i+":"+t[i]);return this.attr({style:e.join(";")}),this},this.html=function(t){return this.element.innerHTML=t,this},this.text=function(t){for(var e=this.element.childNodes,i=0;i<e.length;i++)this.element.removeChild(e[i]);return this.element.appendChild(document.createTextNode(t)),this},this.on=function(t,i){var n=function(t){"function"==typeof i&&i.call(this,t)};return this.element.addEventListener(t,n,!1),e.push({type:t,callback:n}),this},this.off=function(t){if(t){var i=[];for(n=0,r=e.length;n<r;n++){(a=e[n]).type!=t?i.push(a):this.element.removeEventListener(a.type,a.callback,!1)}e=i}else for(var n=0,r=e.length;n<r;n++){var a=e.shift();this.element.removeEventListener(a.type,a.callback,!1)}return this},this.hover=function(t,i){var n=function(e){"function"==typeof t&&t.call(this,e)},r=function(t){"function"==typeof i&&i.call(this,t)};return this.element.addEventListener("mouseover",n,!1),this.element.addEventListener("mouseout",r,!1),e.push({type:"mouseover",callback:n}),e.push({type:"mouseout",callback:r}),this},this.size=function(){var t={width:0,height:0},e=this.element.getBoundingClientRect();if(!e||0==e.width&&0==e.height){for(var i=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],n=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],r=window.getComputedStyle(this.element),a=0;a<i.length;a++)t.height+=parseFloat(r[i[a]]);for(a=0;a<n.length;a++)t.width+=parseFloat(r[n[a]]);t.width=t.width||this.element.getAttribute("width"),t.height=t.height||this.element.getAttribute("height")}else t.width=e.width,t.height=e.height;return isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t},this.is=function(t){return this instanceof jui.include(t)}};return t}},c={name:"util.svg.element.transform",extend:"util.svg.element",component:function(){var t=r.a.include("util.base");return function(){var e={translate:null,scale:null,rotate:null,skew:null,matrix:null};function i(t){var i=[];for(var n in e)e[n]&&i.push(e[n]);t.attr({transform:i.join(" ")})}function n(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e.join(",")}this.translate=function(){return e.translate="translate("+n(arguments)+")",i(this),this},this.rotate=function(t,n,r){if(1==arguments.length)var a=t;else 3==arguments.length&&(a=t+" "+n+","+r);return e.rotate="rotate("+a+")",i(this),this},this.scale=function(){return e.scale="scale("+n(arguments)+")",i(this),this},this.skew=function(){return e.skew="skew("+n(arguments)+")",i(this),this},this.matrix=function(){return e.matrix="matrix("+n(arguments)+")",i(this),this},this.data=function(e){var i=this.attr("transform");return t.typeCheck("string",i)?i.match({translate:/[^translate()]+/g,rotate:/[^rotate()]+/g,scale:/[^scale()]+/g,skew:/[^skew()]+/g,matrix:/[^matrix()]+/g}[e])[0]:null}}}},u={name:"util.svg.element.path",extend:"util.svg.element.transform",component:function(){var t=r.a.include("util.base");return function(){var e=[];this.moveTo=function(t,i,n){return e.push((n||"m")+t+","+i),this},this.MoveTo=function(t,e){return this.moveTo(t,e,"M")},this.lineTo=function(t,i,n){return e.push((n||"l")+t+","+i),this},this.LineTo=function(t,e){return this.lineTo(t,e,"L")},this.hLineTo=function(t,i){return e.push((i||"h")+t),this},this.HLineTo=function(t){return this.hLineTo(t,"H")},this.vLineTo=function(t,i){return e.push((i||"v")+t),this},this.VLineTo=function(t){return this.vLineTo(t,"V")},this.curveTo=function(t,i,n,r,a,s,h){return e.push((h||"c")+t+","+i+" "+n+","+r+" "+a+","+s),this},this.CurveTo=function(t,e,i,n,r,a){return this.curveTo(t,e,i,n,r,a,"C")},this.sCurveTo=function(t,i,n,r,a){return e.push((a||"s")+t+","+i+" "+n+","+r),this},this.SCurveTo=function(t,e,i,n){return this.sCurveTo(t,e,i,n,"S")},this.qCurveTo=function(t,i,n,r,a){return e.push((a||"q")+t+","+i+" "+n+","+r),this},this.QCurveTo=function(t,e,i,n){return this.qCurveTo(t,e,i,n,"Q")},this.tCurveTo=function(t,i,n,r,a){return e.push((a||"t")+t+","+i+" "+n+","+r),this},this.TCurveTo=function(t,e,i,n){return this.tCurveTo(t,e,i,n,"T")},this.arc=function(t,i,n,r,a,s,h,o){return r=r?1:0,a=a?1:0,e.push((o||"a")+t+","+i+" "+n+" "+r+","+a+" "+s+","+h),this},this.Arc=function(t,e,i,n,r,a,s){return this.arc(t,e,i,n,r,a,s,"A")},this.closePath=function(t){return e.push(t||"z"),this},this.ClosePath=function(){return this.closePath("Z")},this.join=function(){e.length>0&&(this.attr({d:e.join(" ")}),e=[])},this.length=function(){var i=t.createId(),n=e.join(" "),r=document.createElement("svg"),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttributeNS(null,"id",i),a.setAttributeNS(null,"d",n),r.appendChild(a),document.body.appendChild(r);var s=document.getElementById(i).getTotalLength();return document.body.removeChild(r),s}}}},l={name:"util.svg.element.path.rect",extend:"util.svg.element.path",component:function(){return function(){this.round=function(t,e,i,n,r,a){i=i||0,n=n||0,r=r||0,a=a||0,this.MoveTo(0,i).Arc(i,i,0,0,1,i,0).HLineTo(t-n).Arc(n,n,0,0,1,t,n).VLineTo(e-r).Arc(r,r,0,0,1,t-r,e).HLineTo(a).Arc(a,a,0,0,1,0,e-a).ClosePath().join()}}}},d={name:"util.svg.element.path.symbol",extend:"util.svg.element.path",component:function(){return function(){var t="";this.template=function(t,e){var i=t,n=half_r=t/2,r=e/2,a="a"+half_r+","+half_r+" 0 1,1 "+i+",0",s="a"+half_r+","+half_r+" 0 1,1 "+-i+",0",h={triangle:["m0,"+-r,"l"+n+","+e,"l"+-t+",0","l"+n+","+-e].join(" "),rect:["m"+-n+","+-r,"l"+t+",0","l0,"+e,"l"+-t+",0","l0,"+-e].join(" "),cross:["m"+-n+","+-r,"l"+t+","+e,"m0,"+-e,"l"+-t+","+e].join(" "),circle:["m"+-i+",0",a,s].join(" ")};return h.rectangle=h.rect,h},this.join=function(){t.length>0&&(this.attr({d:t}),t="")},this.add=function(e,i,n){t+=" M"+e+","+i+n},this.triangle=function(t,e,i,n){return this.MoveTo(t,e).moveTo(0,-n/2).lineTo(i/2,n).lineTo(-i,0).lineTo(i/2,-n)},this.rect=this.rectangle=function(t,e,i,n){return this.MoveTo(t,e).moveTo(-i/2,-n/2).lineTo(i,0).lineTo(0,n).lineTo(-i,0).lineTo(0,-n)},this.cross=function(t,e,i,n){return this.MoveTo(t,e).moveTo(-i/2,-n/2).lineTo(i,n).moveTo(0,-n).lineTo(-i,n)},this.circle=function(t,e,i){return this.MoveTo(t,e).moveTo(-i,0).arc(i/2,i/2,0,1,1,i,0).arc(i/2,i/2,0,1,1,-i,0)}}}},f={name:"util.svg.element.poly",extend:"util.svg.element.transform",component:function(){return function(){var t=[];this.point=function(e,i){return t.push(e+","+i),this},this.join=function(){if(t.length>0){var e=t[0];t.push(e),this.attr({points:t.join(" ")}),t=[]}}}}};r.a.use(o,c,u,d,l,f);var g={name:"util.svg.base",extend:null,component:function(){const t=r.a.include("util.base"),e=r.a.include("util.svg.element"),i=r.a.include("util.svg.element.transform"),n=r.a.include("util.svg.element.path"),a=r.a.include("util.svg.element.path.symbol"),s=r.a.include("util.svg.element.path.rect"),h=r.a.include("util.svg.element.poly");var o=null,c=function(){this.create=function(t,e,i,n){return t.create(e,i),t},this.createChild=function(t,e,i,n){return this.create(t,e,i,n)},this.custom=function(t,i,n){return this.create(new e,t,i,n)},this.defs=function(t){return this.create(new e,"defs",null,t)},this.symbol=function(t,i){return this.create(new e,"symbol",t,i)},this.g=this.group=function(t,e){return this.create(new i,"g",t,e)},this.marker=function(t,i){return this.create(new e,"marker",t,i)},this.a=function(t,e){return this.create(new i,"a",t,e)},this.switch=function(t,i){return this.create(new e,"switch",t,i)},this.use=function(t){return this.create(new e,"use",t)},this.rect=function(t,e){return this.create(new i,"rect",t,e)},this.line=function(t,e){return this.create(new i,"line",t,e)},this.circle=function(t,e){return this.create(new i,"circle",t,e)},this.text=function(e,n){return 2==arguments.length?t.typeCheck("function",n)?this.create(new i,"text",e,n):this.create(new i,"text",e).text(n):this.create(new i,"text",e)},this.textPath=function(i,n){return t.typeCheck("string",n)?this.create(new e,"textPath",i).text(n):this.create(new e,"textPath",i)},this.tref=function(i,n){return t.typeCheck("string",n)?this.create(new e,"tref",i).text(n):this.create(new e,"tref",i)},this.tspan=function(i,n){return t.typeCheck("string",n)?this.create(new e,"tspan",i).text(n):this.create(new e,"tspan",i)},this.ellipse=function(t,e){return this.create(new i,"ellipse",t,e)},this.image=function(t,e){return this.create(new i,"image",t,e)},this.path=function(t,e){return this.create(new n,"path",t,e)},this.pathSymbol=function(t,e){return this.create(new a,"path",t,e)},this.pathRect=function(t,e){return this.create(new s,"path",t,e)},this.polyline=function(t,e){return this.create(new h,"polyline",t,e)},this.polygon=function(t,e){return this.create(new h,"polygon",t,e)},this.pattern=function(t,i){return this.create(new e,"pattern",t,i)},this.mask=function(t,i){return this.create(new e,"mask",t,i)},this.clipPath=function(t,i){return this.create(new e,"clipPath",t,i)},this.linearGradient=function(t,i){return this.create(new e,"linearGradient",t,i)},this.radialGradient=function(t,i){return this.create(new e,"radialGradient",t,i)},this.filter=function(t,i){return this.create(new e,"filter",t,i)},this.foreignObject=function(t,e){return this.create(new i,"foreignObject",t,e)},this.stop=function(t){return this.createChild(new e,"stop",t)},this.animate=function(t){return this.createChild(new e,"animate",t)},this.animateColor=function(t){return this.createChild(new e,"animateColor",t)},this.animateMotion=function(t){return this.createChild(new e,"animateMotion",t)},this.animateTransform=function(t){return this.createChild(new e,"animateTransform",t)},this.mpath=function(t){return this.createChild(new e,"mpath",t)},this.set=function(t){return this.createChild(new e,"set",t)},this.feBlend=function(t){return this.createChild(new e,"feBlend",t)},this.feColorMatrix=function(t){return this.createChild(new e,"feColorMatrix",t)},this.feComponentTransfer=function(t){return this.createChild(new e,"feComponentTransfer",t)},this.feComposite=function(t){return this.createChild(new e,"feComposite",t)},this.feConvolveMatrix=function(t){return this.createChild(new e,"feConvolveMatrix",t)},this.feDiffuseLighting=function(t){return this.createChild(new e,"feDiffuseLighting",t)},this.feDisplacementMap=function(t){return this.createChild(new e,"feDisplacementMap",t)},this.feFlood=function(t){return this.createChild(new e,"feFlood",t)},this.feGaussianBlur=function(t){return this.createChild(new e,"feGaussianBlur",t)},this.feImage=function(t){return this.createChild(new e,"feImage",t)},this.feMerge=function(t,i){return this.createChild(new e,"feMerge",t,i)},this.feMergeNode=function(t){return this.createChild(new e,"feMergeNode",t)},this.feMorphology=function(t){return this.createChild(new e,"feMorphology",t)},this.feOffset=function(t){return this.createChild(new e,"feOffset",t)},this.feSpecularLighting=function(t){return this.createChild(new e,"feSpecularLighting",t)},this.feTile=function(t){return this.createChild(new e,"feTile",t)},this.feTurbulence=function(t){return this.createChild(new e,"feTurbulence",t)}};return c.create=function(t,e,i){return null==o&&(o=new c),o.custom(t,e,i)},c}};r.a.use(g);var p={name:"util.svg.base3d",extend:"util.svg.base",component:function(){const t=r.a.include("util.base"),e=r.a.include("util.math"),i=r.a.include("util.color");return function(){this.rect3d=function(t,n,r,a,s){var h=this,o=e.radian(a),c=n,u=r,l=Math.cos(o)*s,d=Math.sin(o)*s,f=n+l,g=r+d;return h.group({},function(){h.path({fill:i.lighten(t,.15),stroke:i.lighten(t,.15)}).MoveTo(l,0).LineTo(f,0).LineTo(c,d).LineTo(0,d),h.path({fill:t,stroke:t}).MoveTo(0,d).LineTo(0,g).LineTo(c,g).LineTo(c,d),h.path({fill:i.darken(t,.2),stroke:i.darken(t,.2)}).MoveTo(c,g).LineTo(f,u).LineTo(f,0).LineTo(c,d)})},this.cylinder3d=function(n,r,a,s,h,o){var c=this,u=e.radian(s),l=r/2,d=l*(o=void 0==o?1:0==o?.01:o),f=Math.cos(u)*h/2,g=Math.sin(u)*h/2,p=t.createId("cylinder3d");return c.group({},function(){c.ellipse({fill:i.darken(n,.05),"fill-opacity":.85,stroke:i.darken(n,.05),rx:l,ry:g,cx:l,cy:a}).translate(f,g),c.path({fill:"url(#"+p+")","fill-opacity":.85,stroke:n}).MoveTo(l-d,g).LineTo(0,a).Arc(l,g,0,0,0,r,a).LineTo(l+d,g).Arc(l+d,g,0,0,1,l-d,g).translate(f,g),c.ellipse({fill:i.lighten(n,.2),"fill-opacity":.95,stroke:i.lighten(n,.2),rx:l*o,ry:g*o,cx:l,cy:g}).translate(f,g),c.linearGradient({id:p,x1:"100%",x2:"0%",y1:"0%",y2:"0%"},function(){c.stop({offset:"0%","stop-color":i.lighten(n,.15)}),c.stop({offset:"33.333333333333336%","stop-color":i.darken(n,.2)}),c.stop({offset:"66.66666666666667%","stop-color":i.darken(n,.2)}),c.stop({offset:"100%","stop-color":i.lighten(n,.15)})})})}}}};r.a.use(p);var m={name:"util.svg",extend:"util.svg.base3d",component:function(){const t=r.a.include("util.base"),e=r.a.include("util.svg.element"),i=r.a.include("util.svg.element.transform"),n=r.a.include("util.svg.element.path"),a=r.a.include("util.svg.element.poly");var s=function(r,s){var h=this,o=null,c=null,u=null,l={},d=0,f=!1;function g(t){var e=t.children;(function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].order>0)return!0;return!1})(e)&&e.sort(function(t,e){return t.order-e.order});for(var i=0,r=e.length;i<r;i++){var s=e[i];s&&(s.children.length>0&&g(s),(s instanceof n||s instanceof a)&&s.join(),s.parent==t&&t.element.appendChild(s.element))}}function p(t){for(var e=t.children,i=0,n=e.length;i<n;i++){var r=e[i];r&&(r.off(),r.children.length>0&&p(r))}}this.create=function(e,i,n,r){return e.create(i,n),0==d?c.append(e):l[d].append(e),t.typeCheck("function",r)&&(l[++d]=e,r.call(e),d--),e},this.createChild=function(t,e,i,n){if(t.parent==c)throw new Error("JUI_CRITICAL_ERR: Parents are required elements of the '"+e+"'");return this.create(t,e,i,n)},this.size=function(){if(2!=arguments.length)return o.size();var t=arguments[0],e=arguments[1];o.attr({width:t,height:e})},this.clear=function(t){c.each(function(){this.element.parentNode&&c.element.removeChild(this.element)}),p(c),!0===t&&(u.each(function(){this.element.parentNode&&u.element.removeChild(this.element)}),p(u))},this.reset=function(t){this.clear(t),c.children=[],!0===t&&(u.children=[])},this.render=function(t){this.clear(),g(!1===f||!0===t?o:c),f=!0},this.download=function(e){t.typeCheck("string",e)&&(e=e.split(".")[0]);var i=document.createElement("a");i.download=e?e+".svg":"svg.svg",i.href=this.toDataURI(),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)},this.downloadImage=function(e,i){i=i||"image/png";var n=new Image,r=this.size(),a=this.toDataURI().replace('width="100%"','width="'+r.width+'"').replace('height="100%"','height="'+r.height+'"');n.onload=function(){var r=document.createElement("canvas");r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0);var a=r.toDataURL(i);t.typeCheck("string",e)&&(e=e.split(".")[0]);var s=document.createElement("a");s.download=e?e+".png":"svg.png",s.href=a,document.body.appendChild(s),s.click(),s.parentNode.removeChild(s)},n.src=a},this.exportCanvas=function(t){var e=new Image,i=this.size(),n=this.toDataURI().replace('width="100%"','width="'+i.width+'"').replace('height="100%"','height="'+i.height+'"');e.onload=function(){t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0)},e.src=n},this.toXML=function(){var t=r.innerHTML;return['<?xml version="1.0" encoding="utf-8"?>',(t=t.replace('xmlns="http://www.w3.org/2000/svg"',"")).replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" ')].join("\n")},this.toDataURI=function(){var e=this.toXML();return(t.browser.mozilla||t.browser.msie)&&(e=encodeURIComponent(e)),t.browser.msie?"data:image/svg+xml,"+e:"data:image/svg+xml;utf8,"+e},this.autoRender=function(t,e){d>0||(e?c.append(t):u.append(t))},this.getTextSize=function(t,e){if(""==t)return{width:0,height:0};e=e||{};var i=document.body||o.element,n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"width",500),n.setAttributeNS(null,"height",100),n.setAttributeNS(null,"x",-2e4),n.setAttributeNS(null,"y",-2e4);var r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttributeNS(null,"x",-200),r.setAttributeNS(null,"y",-200),r.appendChild(document.createTextNode(t)),e.fontSize&&r.setAttributeNS(null,"font-size",e.fontSize),e.fontFamily&&r.setAttributeNS(null,"font-family",e.fontFamily),e.bold&&r.setAttributeNS(null,"font-weight",e.bold),e.style&&r.setAttributeNS(null,"font-style",e.style),n.appendChild(r),i.appendChild(n);var a=r.getBoundingClientRect();return i.removeChild(n),{width:a.width,height:a.height}},h.root=o=new e,c=new i,u=new i,o.create("svg",s),c.create("g"),u.create("g"),c.translate(.5,.5),u.translate(.5,.5),r.appendChild(o.element),o.append(c),o.append(u)};return s.createObject=function(t){var i=new e;if(i.create(t.type,t.attr),t.children instanceof Array)for(var n=0,r=t.children.length;n<r;n++)i.append(s.createObject(t.children[n]));return i},s}},v={name:"util.scale.linear",extend:null,component:function(){var t=r.a.include("util.math"),e=function(){var i=[0,1],n=[0,1],r=!1,a=!1,s={},h=null,o=null,c=null,u=null,l=null,d=null,f=null,g=null,p=0,m=null,v=null;function x(t){if(u<t)return a?x(u):n[0]+Math.abs(t-i[0])*p;if(c>t)return a?x(c):n[0]-Math.abs(t-i[0])*p;var e=(t-i[0])/f;return m(e)}return x.cache=function(){return s},x.min=function(){return Math.min.apply(Math,i)},x.max=function(){return Math.max.apply(Math,i)},x.rangeMin=function(){return Math.min.apply(Math,n)},x.rangeMax=function(){return Math.max.apply(Math,n)},x.rate=function(t,e){return x(x.max()*(t/e))},x.clamp=function(t){a=t||!1},x.domain=function(t){if(!arguments.length)return i;for(var e=0;e<t.length;e++)i[e]=t[e];return c=x.min(),u=x.max(),f=i[1]-i[0],this},x.range=function(e){if(!arguments.length)return n;for(var i=0;i<e.length;i++)n[i]=e[i];return h=t.interpolateRound(n[0],n[1]),o=t.interpolateNumber(n[0],n[1]),l=x.rangeMin(),d=x.rangeMax(),g=Math.abs(d-l),p=g/f,m=r?h:o,this},x.rangeRound=function(t){return r=!0,x.range(t)},x.rangeBand=function(){return v},x.invert=function(t){return e().domain(n).range(i)(t)},x.ticks=function(e,n,r,a){a=a||!1;var s=x.max();if(0==i[0]&&0==i[1])return[];for(var h=t.nice(i[0],i[1],e||10,n||!1),o=[],c=a?h.max:h.min,u=a?h.min:h.max,l=h.spacing,d=t.fixed(l);a?u<=c:c<=u;)o.push(c),c=a?d.minus(c,l):d.plus(c,l);if(a){o[0]!=s&&o.unshift(s);for(var f=0,g=o.length;f<g;f++)o[f]=Math.abs(o[f]-s)}else o[o.length-1]!=u&&c>u&&o.push(u),i[0]>i[1]&&o.reverse();var p=x(o[0]),m=x(o[1]);return v=Math.abs(m-p),o},x};return e}},x={name:"util.scale.log",extend:null,component:function(){var t=r.a.include("util.base"),e=r.a.include("util.scale.linear");return function(i){var n=i||10,r=e(),a=[],s=null,h=null;function o(t){return t<0?-Math.log(Math.abs(t))/Math.log(n):t>0?Math.log(t)/Math.log(n):0}function c(t){return t<0?-Math.pow(n,Math.abs(t)):t>0?Math.pow(n,t):0}function u(t){return Math.pow(n,(t+"").length-1)<t}function l(t){return Math.pow(n,(t+"").length)}var d=function(t){var e=t;return t>s?e=s:t<h&&(e=h),r(o(e))};return t.extend(d,r),d.log=function(){for(var t=[],e=0;e<a.length;e++)t[e]=o(a[e]);return t},d.domain=function(t){if(!arguments.length)return a;for(var e=0;e<t.length;e++)a[e]=t[e];if(s=Math.max.apply(Math,a),h=Math.min.apply(Math,a),u(s)&&(a[1]=s=l(s)),u(Math.abs(h))){var i=l(Math.abs(h));a[0]=h=h<0?-i:i}return r.domain(d.log()),d},d.base=function(t){return r.domain(d.log()),d},d.invert=function(t){return c(r.invert(t))},d.ticks=function(t,e,i){var n=r.ticks(t,e,i||1e20,!0);n[n.length-1]<r.max()&&n.push(r.max());for(var a=[],s=0,h=n.length;s<h;s++)a[s]=c(n[s]);return a},d}}},y={name:"util.scale.ordinal",extend:null,component:function(){return function(){var t=[],e=[],i=0,n={},r=!1;function a(i){var r=""+i;if(void 0!==n[r])return n[r];for(var a=-1,s=0;s<t.length;s++)if("string"==typeof i&&t[s]===i){a=s;break}return a>-1?(n[r]=e[a],e[a]):void 0!==e[i]?(n[r]=e[i],e[i]):null}return a.domain=function(e){if(void 0===e)return t;for(var i=0;i<e.length;i++)t[i]=e[i];return this},a.range=function(t){if(void 0===t)return e;for(var i=0;i<t.length;i++)e[i]=t[i];return this},a.rangePoints=function(n,s){s=s||0;for(var h=t.length,o=(n[1]-n[0]-s)/h,c=[],u=0;u<t.length;u++)c[u]=0==u?n[0]+s/2+o/2:c[u-1]+o;return e=c,i=o,r=!0,a},a.rangeBands=function(n,s,h){s=s||0,h=h||0;for(var o=t.length-1,c=(n[1]-n[0])/o,u=[],l=0;l<t.length;l++)u[l]=0==l?n[0]:c+u[l-1];return i=c,e=u,r=!1,a},a.rangeBand=function(){return i},a.invert=function(t){var n=Math.min(e[0],e[1]);if(r){var a=t;a<(n-=i/2)&&(a=n);var s=Math.abs(a-n)/i;return Math.floor(s)}return s=Math.abs(t-n)/i,Math.ceil(s)},a}}},w={name:"util.scale.time",extend:null,component:function(){var t=r.a.include("util.time"),e=r.a.include("util.scale.linear");return function(){var i,n=[],r=e(),a=r.domain;return r.domain=function(t){if(!arguments.length)return a.call(r);for(var e=0;e<t.length;e++)n[e]=+t[e];return a.call(r,n)},r.min=function(){return Math.min(n[0],n[n.length-1])},r.max=function(){return Math.max(n[0],n[n.length-1])},r.rate=function(t,e){return r(r.max()*(t/e))},r.ticks=function(e,a){for(var s=n[0],h=n[1],o=[];s<h;)o.push(new Date(+s)),s=t.add(s,e,a);o.push(new Date(+s));var c=r(o[1]),u=r(o[2]);return i=u-c,o},r.realTicks=function(e,a){var s=n[0],h=n[1],o=[],c=new Date(+s),u=null;for(e==t.years?u=new Date(c.getFullYear(),0,1):e==t.months?u=new Date(c.getFullYear(),c.getMonth(),1):e==t.days||e==t.weeks?u=new Date(c.getFullYear(),c.getMonth(),c.getDate()):e==t.hours?u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),0,0,0):e==t.minutes?u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),0,0):e==t.seconds?u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0):e==t.milliseconds&&(u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())),u=t.add(u,e,a);+u<+h;)o.push(new Date(+u)),u=t.add(u,e,a);var l=r(o[1]),d=r(o[2]);return i=d-l,o},r.rangeBand=function(){return i},r.invert=function(t){var i=e().domain(r.range()).range(r.domain());return new Date(i(t))},r}}},b={name:"util.scale",extend:null,component:function(){var t=r.a.include("util.math"),e=r.a.include("util.time"),i={circle:function(){var t=[],e=[],i=0;function n(t){}return n.domain=function(e){if(void 0===e)return t;for(var i=0;i<e.length;i++)t[i]=e[i];return this},n.range=function(t){if(void 0===t)return e;for(var i=0;i<t.length;i++)e[i]=t[i];return this},n.rangePoints=function(r,a){a=a||0;for(var s=t.length,h=(r[1]-r[0]-a)/s,o=[],c=0;c<t.length;c++)o[c]=0==c?r[0]+a/2+h/2:o[c-1]+h;return e=o,i=h,n},n.rangeBands=function(r,a,s){a=a||0,s=s||0;for(var h=t.length-1,o=(r[1]-r[0])/h,c=[],u=0;u<t.length;u++)c[u]=0==u?r[0]:o+c[u-1];return i=o,e=c,n},n.rangeBand=function(){return i},n},ordinal:function(){var t=[],e=[],i=0,n={};function r(i){var r=""+i;if(void 0!==n[r])return n[r];for(var a=-1,s=0;s<t.length;s++)if("string"==typeof i&&t[s]===i){a=s;break}return a>-1?(n[r]=e[a],e[a]):void 0!==e[i]?(t[i]=i,n[r]=e[i],e[i]):null}return r.domain=function(e){if(void 0===e)return t;for(var i=0;i<e.length;i++)t[i]=e[i];return this},r.range=function(t){if(void 0===t)return e;for(var i=0;i<t.length;i++)e[i]=t[i];return this},r.rangePoints=function(n,a){a=a||0;for(var s=t.length,h=(n[1]-n[0]-a)/s,o=[],c=0;c<t.length;c++)o[c]=0==c?n[0]+a/2+h/2:o[c-1]+h;return e=o,i=h,r},r.rangeBands=function(n,a,s){a=a||0,s=s||0;for(var h=t.length-1,o=(n[1]-n[0])/h,c=[],u=0;u<t.length;u++)c[u]=0==u?n[0]:o+c[u-1];return i=o,e=c,r},r.rangeBand=function(){return i},r.invert=function(t){return Math.ceil(t/i)},r},time:function(){var t,n=[],r=i.linear(),a=r.domain;return r.domain=function(t){if(!arguments.length)return a.call(r);for(var e=0;e<t.length;e++)n[e]=+t[e];return a.call(r,n)},r.min=function(){return Math.min(n[0],n[n.length-1])},r.max=function(){return Math.max(n[0],n[n.length-1])},r.rate=function(t,e){return r(r.max()*(t/e))},r.ticks=function(i,a){for(var s=n[0],h=n[1],o=[];s<h;)o.push(new Date(+s)),s=e.add(s,i,a);o.push(new Date(+s));var c=r(o[1]),u=r(o[2]);return t=u-c,o},r.realTicks=function(i,a){var s=n[0],h=n[1],o=[],c=new Date(+s),u=null;for(i==e.years?u=new Date(c.getFullYear(),0,1):i==e.months?u=new Date(c.getFullYear(),c.getMonth(),1):i==e.days||i==e.weeks?u=new Date(c.getFullYear(),c.getMonth(),c.getDate()):i==e.hours?u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),0,0,0):i==e.minutes?u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),0,0):i==e.seconds?u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0):i==e.milliseconds&&(u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())),u=e.add(u,i,a);+u<+h;)o.push(new Date(+u)),u=e.add(u,i,a);var l=r(o[1]),d=r(o[2]);return t=d-l,o},r.rangeBand=function(){return t},r.invert=function(t){var e=i.linear().domain(r.range()).range(r.domain());return new Date(e(t))},r},log:function(t){var e=t||10,n=i.linear(),r=[],a=null,s=null;function h(t){return t<0?-Math.log(Math.abs(t))/Math.log(e):t>0?Math.log(t)/Math.log(e):0}function o(t){return t<0?-Math.pow(e,Math.abs(t)):t>0?Math.pow(e,t):0}function c(t){return Math.pow(e,(t+"").length-1)<t}function u(t){return Math.pow(e,(t+"").length)}var l=function(t){var e=t;return t>a?e=a:t<s&&(e=s),n(h(e))};return $.extend(l,n),l.log=function(){for(var t=[],e=0;e<r.length;e++)t[e]=h(r[e]);return t},l.domain=function(t){if(!arguments.length)return r;for(var e=0;e<t.length;e++)r[e]=t[e];if(a=Math.max.apply(Math,r),s=Math.min.apply(Math,r),c(a)&&(r[1]=a=u(a)),c(Math.abs(s))){var i=u(Math.abs(s));r[0]=s=s<0?-i:i}return n.domain(l.log()),l},l.base=function(t){return n.domain(l.log()),l},l.invert=function(t){return o(n.invert(t))},l.ticks=function(t,e,i){var r=n.ticks(t,e,i||1e20,!0);r[r.length-1]<n.max()&&r.push(n.max());for(var a=[],s=0,h=r.length;s<h;s++)a[s]=o(r[s]);return a},l},linear:function(){var e=[0,1],n=[0,1],r=!1,a=!1,s={},h=null,o=null,c=null,u=null,l=null,d=null,f=null,g=null,p=0,m=null,v=null;function x(t){if(u<t)return a?x(u):n[0]+Math.abs(t-e[0])*p;if(c>t)return a?x(c):n[0]-Math.abs(t-e[0])*p;var i=(t-e[0])/f;return m(i)}return x.cache=function(){return s},x.min=function(){return Math.min.apply(Math,e)},x.max=function(){return Math.max.apply(Math,e)},x.rangeMin=function(){return Math.min.apply(Math,n)},x.rangeMax=function(){return Math.max.apply(Math,n)},x.rate=function(t,e){return x(x.max()*(t/e))},x.clamp=function(t){a=t||!1},x.domain=function(t){if(!arguments.length)return e;for(var i=0;i<t.length;i++)e[i]=t[i];return c=x.min(),u=x.max(),f=e[1]-e[0],this},x.range=function(e){if(!arguments.length)return n;for(var i=0;i<e.length;i++)n[i]=e[i];return h=t.interpolateRound(n[0],n[1]),o=t.interpolateNumber(n[0],n[1]),l=x.rangeMin(),d=x.rangeMax(),g=Math.abs(d-l),p=g/f,m=r?h:o,this},x.rangeRound=function(t){return r=!0,x.range(t)},x.rangeBand=function(){return v},x.invert=function(t){return i.linear().domain(n).range(e)(t)},x.ticks=function(i,n,r,a){a=a||!1;var s=x.max();if(0==e[0]&&0==e[1])return[];for(var h=t.nice(e[0],e[1],i||10,n||!1),o=[],c=a?h.max:h.min,u=a?h.min:h.max,l=h.spacing,d=t.fixed(l);a?u<=c:c<=u;)o.push(c),c=a?d.minus(c,l):d.plus(c,l);if(a){o[0]!=s&&o.unshift(s);for(var f=0,g=o.length;f<g;f++)o[f]=Math.abs(o[f]-s)}else o[o.length-1]!=u&&c>u&&o.push(u),e[0]>e[1]&&o.reverse();var p=x(o[0]),m=x(o[1]);return v=Math.abs(m-p),o},x}};return i}},k={name:"chart.vector",extend:null,component:function(){var t=function(e,i,n){this.x=e||0,this.y=i||0,this.z=n||0,this.add=function(e){return e instanceof t?new t(this.x+e.x,this.y+e.y,this.z+e.z):new t(this.x+e,this.y+e,this.z+e)},this.subtract=function(e){return e instanceof t?new t(this.x-e.x,this.y-e.y,this.z-e.z):new t(this.x-e,this.y-e,this.z-e)},this.multiply=function(e){return e instanceof t?new t(this.x*e.x,this.y*e.y,this.z*e.z):new t(this.x*e,this.y*e,this.z*e)},this.dotProduct=function(t){var e=this.x*t.x+this.y*t.y+this.z*t.z;return Math.acos(e/(this.getMagnitude()*t.getMagnitude()))},this.crossProduct=function(e){return new t(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)},this.normalize=function(){var t=this.getMagnitude();this.x/=t,this.y/=t,this.z/=t},this.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}};return t}},C={name:"chart.draw",extend:null,component:function(){var t=r.a.include("util.base"),e=function(){this.render=function(){if(!t.typeCheck("function",this.draw))throw new Error("JUI_CRITICAL_ERR: 'draw' method must be implemented");t.typeCheck("function",this.drawBefore)&&this.drawBefore();var e=this.draw();t.typeCheck("function",this.drawAnimate)&&(!1!==(this.grid||this.brush||this.widget||this.map).animate&&this.drawAnimate(e));return t.typeCheck("function",this.drawAfter)&&this.drawAfter(e),e},this.format=function(){return((this.grid||this.brush||this.widget).format||this.chart.format).apply(this.chart,arguments)},this.balloonPoints=function(t,e,i,n){var r=[];return"top"==t?(r.push([0,0].join(",")),r.push([e,0].join(",")),r.push([e,i].join(",")),r.push([e/2+n/2,i].join(",")),r.push([e/2,i+n].join(",")),r.push([e/2-n/2,i].join(",")),r.push([0,i].join(",")),r.push([0,0].join(","))):"bottom"==t?(r.push([0,n].join(",")),r.push([e/2-n/2,n].join(",")),r.push([e/2,0].join(",")),r.push([e/2+n/2,n].join(",")),r.push([e,n].join(",")),r.push([e,n+i].join(",")),r.push([0,n+i].join(",")),r.push([0,n].join(","))):"left"==t?(r.push([0,0].join(",")),r.push([e,0].join(",")),r.push([e,i/2-n/2].join(",")),r.push([e+n,i/2].join(",")),r.push([e,i/2+n/2].join(",")),r.push([e,i].join(",")),r.push([0,i].join(",")),r.push([0,0].join(","))):"right"==t?(r.push([0,0].join(",")),r.push([e,0].join(",")),r.push([e,i].join(",")),r.push([0,i].join(",")),r.push([0,i/2+n/2].join(",")),r.push([0-n,i/2].join(",")),r.push([0,i/2-n/2].join(",")),r.push([0,0].join(","))):(r.push([0,0].join(",")),r.push([e,0].join(",")),r.push([e,i].join(",")),r.push([0,i].join(",")),r.push([0,0].join(","))),r.join(" ")},this.on=function(e,i){var n=this;return this.chart.on(e,function(){if(t.startsWith(e,"axis.")&&t.typeCheck("integer",n.axis.index)){var r=n.chart.axis(n.axis.index),a=arguments[0];t.typeCheck("object",r)&&arguments[1]==n.axis.index&&i.apply(n,[a])}else i.apply(n,arguments)},"render")},this.calculate3d=function(){var e=this.axis.area("width"),i=this.axis.area("height"),n=this.axis.area("x"),r=this.axis.area("y"),a=this.axis.depth,s=this.axis.degree,h=this.axis.perspective,o=arguments;t.typeCheck("integer",s.x)||(s.x=0),t.typeCheck("integer",s.y)||(s.y=0),t.typeCheck("integer",s.z)||(s.z=0);for(var c=0;c<o.length;c++)o[c].perspective=h,o[c].rotate(Math.max(e,i,a),s,n+e/2,r+i/2,a/2)}};return e.setup=function(){return{type:null,animate:!1}},e}},M={name:"chart.axis",extend:null,component:function(){var t=r.a.include("util.base"),e=function(e,i,n){var a=this,s=null,h={},o={},c="",u=null,l="",d=null;function f(e,i){return t.typeCheck("string",e)&&e.indexOf("%")>-1?i*(parseFloat(e.replace("%",""))/100):e}function g(i,n){if(("x"==n||"y"==n||"z"==n)&&!t.typeCheck("object",i[n]))return null;i[n]=i[n]||{},"x"==n?i[n].orient="top"==i[n].orient?"top":"bottom":"y"==n?i[n].orient="right"==i[n].orient?"right":"left":"z"==n?i[n].orient="center":"c"==n&&(i[n].type=i[n].type||"panel",i[n].orient="custom"),i[n].type=i[n].type||"block";var s=r.a.include("chart.grid."+i[n].type);r.a.defineOptions(s,i[n]);var h=new s(e,i,i[n]);h.chart=e,h.axis=i,h.grid=i[n],h.svg=e.svg;var o=h.render();return a.isFull3D()||("left"==i[n].orient?o.root.translate(e.area("x")+a.area("x")-i[n].dist,e.area("y")):"right"==i[n].orient?o.root.translate(e.area("x")+a.area("x2")+i[n].dist,e.area("y")):"bottom"==i[n].orient?o.root.translate(e.area("x"),e.area("y")+a.area("y2")+i[n].dist):"top"==i[n].orient?o.root.translate(e.area("x"),e.area("y")+a.area("y")-i[n].dist):o.root&&o.root.translate(e.area("x")+a.area("x"),e.area("y")+a.area("y"))),o.scale.type=i[n].type,o.scale.root=o.root,o.scale}function p(t){var e=a.origin,i=a.buffer,n=Math.ceil(e.length/i);a.page=t<1?1:t>n?n:t,a.start=(a.page-1)*i,a.end=a.start+i,a.end>e.length&&(a.start=e.length-i,a.end=e.length),a.end<=e.length&&(a.start=a.start<0?0:a.start,a.data=e.slice(a.start,a.end),e.length>0&&a.page++)}function m(t,e){var i=a.origin;a.end=e>i.length?i.length:e,a.start=t<0?0:t,a.data=i.slice(a.start,a.end)}function v(t){var e=a.area("y"),i=a.area("x");return t.chartY>e&&t.chartY<e+a.area("height")&&t.chartX>i&&t.chartX<i+a.area("width")&&(t.axisX=t.chartX-i,t.axisY=t.chartY-e,!0)}this.getValue=function(e,i,r){var a=e[n.keymap[i]];return t.typeCheck("undefined",a)?(a=e[i],t.typeCheck("undefined",a)?r:a):a},this.reload=function(i){var n=e.area();t.extend(this,{x:i.x,y:i.y,z:i.z,c:i.c,map:i.map}),o=t.typeCheck("integer",i.padding)?{left:i.padding,right:i.padding,bottom:i.padding,top:i.padding}:i.padding,h=function(t,i){return t.x=f(t.x,e.area("width")),t.y=f(t.y,e.area("height")),t.width=f(t.width,e.area("width")),t.height=f(t.height,e.area("height")),t.x2=t.x+t.width,t.y2=t.y+t.height,t.x+=i.left||0,t.y+=i.top||0,t.x2-=i.right||0,t.y2-=i.bottom||0,t.width=t.x2-t.x,t.height=t.y2-t.y,t}(t.extend(i.area,{x:0,y:0,width:n.width,height:n.height},!0),o),u&&(u.remove(),u=null),c=t.createId("clip-id-"),u=e.svg.clipPath({id:c},function(){e.svg.rect({x:h.x,y:h.y,width:h.width,height:h.height})}),e.appendDefs(u),d&&(d.remove(),d=null),l=t.createId("clip-rect-id-"),d=e.svg.clipPath({id:l},function(){e.svg.rect({x:0,y:0,width:h.width,height:h.height})}),e.appendDefs(d),this.root=function(){var t=e.theme("axisBorderWidth"),i=o.left+o.right,n=o.top+o.bottom,r=e.svg.rect({rx:e.theme("axisBorderRadius"),ry:e.theme("axisBorderRadius"),fill:e.theme("axisBackgroundColor"),"fill-opacity":e.theme("axisBackgroundOpacity"),stroke:e.theme("axisBorderColor"),"stroke-width":t,width:h.width+i-t,height:h.height+n-t,x:h.x-o.left,y:h.y-o.top});return r.translate(e.area("x"),e.area("y")),r}(),this.x=g(this,"x"),this.y=g(this,"y"),this.z=g(this,"z"),this.c=g(this,"c"),this.map=function(i,n){if("map"==n&&!t.typeCheck("object",i[n]))return null;i[n]=i[n]||{};var h=r.a.include("chart.map");r.a.defineOptions(h,i[n]),null==s&&(s=new h(e,i,i[n])),s.chart=e,s.axis=i,s.map=i[n],s.svg=e.svg;var o=s.render();return o.root.translate(e.area("x")+a.area("x"),e.area("y")+a.area("y")),o.scale.type=i[n].type,o.scale.root=o.root,o.scale}(this,"map"),this.buffer=i.buffer,this.shift=i.shift,this.index=i.index,this.page=i.page,this.start=i.start,this.end=i.end,this.degree=i.degree,this.depth=i.depth,this.perspective=i.perspective},this.area=function(e){return t.typeCheck("undefined",h[e])?h:h[e]},this.padding=function(e){return t.typeCheck("undefined",o[e])?o:o[e]},this.get=function(t){return{area:h,padding:o,clipId:c,clipRectId:l}[t]||n[t]},this.set=function(r,a,s){t.typeCheck("object",a)?!0===s?(i[r]=t.deepClone(a),n[r]=t.deepClone(a)):(t.extend(i[r],a),t.extend(n[r],a)):(i[r]=a,n[r]=a),e.isRender()&&e.render()},this.updateGrid=this.set,this.update=function(e){this.origin=t.typeCheck("array",e)?e:[e],this.page=1,this.start=0,this.end=0,this.screen(1)},this.screen=function(t){p(t),this.end<=this.origin.length&&e.isRender()&&e.render()},this.next=function(){var t=this.origin,i=this.buffer,n=this.shift;this.start+=n;var r=this.start+i>t.length;this.end=r?t.length:this.start+i,this.start=r?t.length-i:this.start,this.start=this.start<0?0:this.start,this.data=t.slice(this.start,this.end),e.isRender()&&e.render()},this.prev=function(){var t=this.origin,i=this.buffer,n=this.shift;this.start-=n;var r=this.start<0;this.end=r?i:this.start+i,this.start=r?0:this.start,this.data=t.slice(this.start,this.end),e.isRender()&&e.render()},this.zoom=function(t,i){t!=i&&(m(t,i),e.isRender()&&e.render())},this.isFull3D=function(){return!t.typeCheck(["undefined","null"],this.z)},t.extend(a,{data:n.data,origin:n.origin,buffer:n.buffer,shift:n.shift,index:n.index,page:n.page,start:n.start,end:n.end,degree:n.degree,depth:n.depth,perspective:n.perspective}),a.origin=a.data,a.start>0||a.end>0?m(a.start,a.end):p(a.page),function(){var t=!1,i=n.index;e.on("chart.mousemove",function(n){v(n)?t||(e.emit("axis.mouseover",[n,i]),t=!0):t&&(e.emit("axis.mouseout",[n,i]),t=!1),v(n)&&e.emit("axis.mousemove",[n,i])}),e.on("bg.mousemove",function(n){!v(n)&&t&&(e.emit("axis.mouseout",[n,i]),t=!1)}),e.on("chart.mousedown",function(t){v(t)&&e.emit("axis.mousedown",[t,i])}),e.on("chart.mouseup",function(t){v(t)&&e.emit("axis.mouseup",[t,i])}),e.on("chart.click",function(t){v(t)&&e.emit("axis.click",[t,i])}),e.on("chart.dblclick",function(t){v(t)&&e.emit("axis.dblclick",[t,i])}),e.on("chart.rclick",function(t){v(t)&&e.emit("axis.rclick",[t,i])}),e.on("chart.mousewheel",function(t){v(t)&&e.emit("axis.mousewheel",[t,i])})}(),a.reload(n)};return e.setup=function(){return{extend:null,x:null,y:null,z:null,c:null,map:null,data:[],origin:[],keymap:{},area:{},padding:{top:0,bottom:0,left:0,right:0},buffer:1e4,shift:1,page:1,start:0,end:0,degree:{x:0,y:0,z:0},depth:0,perspective:.9}},e}},T={name:"chart.map",extend:null,component:function(){var t=r.a.include("util.base"),e=r.a.include("util.dom"),i=(r.a.include("util.math"),r.a.include("util.svg")),n=function(){var n=this,r={},a=null,s={},h=1,o=0,c=0;function u(e){for(var r=[],a=0,s=e.length;a<s;a++)if(t.typeCheck("object",e[a])){var h={};t.typeCheck("string",e[a].style)&&(h=c(e[a].style),delete e[a].style);var o=i.createObject({type:null!=e[a].d?"path":"polygon",attr:e[a]});o.attr(t.extend(h,{fill:n.chart.theme("mapPathBackgroundColor"),"fill-opacity":n.chart.theme("mapPathBackgroundOpacity"),stroke:n.chart.theme("mapPathBorderColor"),"stroke-width":n.chart.theme("mapPathBorderWidth"),"stroke-opacity":n.chart.theme("mapPathBorderOpacity")})),r.push({path:o,data:e[a]})}function c(e){for(var i={},n=e.split(";"),r=0;r<n.length;r++)if(-1!=n[r].indexOf(":")){var a=n[r].split(":");i[t.trim(a[0])]=t.trim(a[1])}return i}return r}function l(e){if(t.typeCheck("string",e.id)){for(var i=[],n=e.childNodes,r=0,a=n.length;r<a;r++){var s=n[r],h=s.nodeName.toLowerCase();if(1==s.nodeType)if("g"==h)i=i.concat(l(s));else if("path"==h||"polygon"==h){var o={group:e.id};for(var c in s.attributes){var u=s.attributes[c];u.specified&&d(u.name)&&(o[u.name]=f(u))}t.typeCheck("string",o.id)&&t.extend(o,g(o.id)),i.push(o)}}return i}}function d(t){return"group"==t||"id"==t||"title"==t||"x"==t||"y"==t||"d"==t||"points"==t||"class"==t||"style"==t}function f(t){return"x"==t.name||"y"==t.name?parseFloat(t.value):t.value}function g(t){for(var e=n.axis.data,i=0;i<e.length;i++){if(n.axis.getValue(e[i],"id",null)==t)return e[i]}return null}function p(){for(var e=n.chart.svg.group(),i=function(e){return t.typeCheck("array",r[e])?u(r[e]):(r[e]=[],t.ajax({url:e,async:!1,success:function(i){var a=i.responseXML,s=a.getElementsByTagName("svg"),h=a.getElementsByTagName("style");if(1==s.length){for(var o=s[0].childNodes,c=0,u=o.length;c<u;c++){var p=o[c],m=p.nodeName.toLowerCase();if(1==p.nodeType)if("g"==m)r[e]=r[e].concat(l(p));else if("path"==m||"polygon"==m){var v={};for(var x in p.attributes){var y=p.attributes[x];y.specified&&d(y.name)&&(v[y.name]=f(y))}t.typeCheck("string",v.id)&&t.extend(v,g(v.id)),r[e].push(v)}}for(c=0;c<h.length;c++)n.svg.root.element.appendChild(h[c])}},fail:function(t){throw new Error("JUI_CRITICAL_ERR: Failed to load resource")}}),u(r[e]))}(n.map.path),a=0,h=i.length;a<h;a++){var o=i[a].path,c=i[a].data;e.append(o),t.typeCheck("string",c.id)&&(s[c.id]=i[a])}return e}function m(){var t=n.map.width,e=n.map.height;return{x:(t*h-t)/2+o,y:(e*h-e)/2+c}}this.scale=function(e){if(t.typeCheck("string",e)){var i=null,r=null,a=null,o=null,c=m();if(t.typeCheck("object",s[e])){if(a=s[e].path,null!=(o=s[e].data).x){var u=n.axis.getValue(o,"dx",0);i=(parseFloat(o.x)+u)*h-c.x}if(null!=o.y){var l=n.axis.getValue(o,"dy",0);r=(parseFloat(o.y)+l)*h-c.y}}return{x:i,y:r,path:a,data:o}}},this.scale.each=function(t){for(var e in s)t.apply(this,[e,s[e]])},this.scale.size=function(){return{width:n.map.width,height:n.map.height}},this.scale.scale=function(t){return!t||t<0?h:(h=t,a.scale(h),this.view(o,c),h)},this.scale.view=function(e,i){var n={x:o,y:c};if(!t.typeCheck("number",e)||!t.typeCheck("number",i))return n;o=e,c=i;var r=m();return a.translate(-r.x,-r.y),{x:o,y:c}},this.draw=function(){var t=this.chart.svg.group();return h=this.map.scale,o=this.map.viewX,c=this.map.viewY,a=p(),t.append(a),1!=this.map.scale&&this.scale.scale(h),0==this.map.viewX&&0==this.map.viewY||this.scale.view(o,c),this.map.hide&&t.attr({visibility:"hidden"}),{root:t,scale:this.scale}},this.drawAfter=function(t){t.root.attr({"clip-path":"url(#"+this.axis.get("clipRectId")+")"}),setTimeout(function(){n.scale.each(function(t,i){!function(t,i){var r=n.chart;function a(t){var i=e.offset(r.root),n=t.pageX-i.left,a=t.pageY-i.top;t.bgX=n,t.bgY=a,t.chartX=n-r.padding("left"),t.chartY=a-r.padding("top")}t.on("click",function(t){a(t),r.emit("map.click",[i,t])}),t.on("dblclick",function(t){a(t),r.emit("map.dblclick",[i,t])}),t.on("contextmenu",function(t){a(t),r.emit("map.rclick",[i,t]),t.preventDefault()}),t.on("mouseover",function(t){a(t),r.emit("map.mouseover",[i,t])}),t.on("mouseout",function(t){a(t),r.emit("map.mouseout",[i,t])}),t.on("mousemove",function(t){a(t),r.emit("map.mousemove",[i,t])}),t.on("mousedown",function(t){a(t),r.emit("map.mousedown",[i,t])}),t.on("mouseup",function(t){a(t),r.emit("map.mouseup",[i,t])})}(i.path,i)})},1)}};return n.setup=function(){return{scale:1,viewX:0,viewY:0,hide:!1,path:"",width:-1,height:-1}},n}};r.a.use(m,M);var A={name:"chart.builder",extend:"core",component:function(){const t=r.a.include("util.base"),e=r.a.include("util.dom"),i=r.a.include("util.svg"),n=r.a.include("util.color"),a=r.a.include("chart.axis");t.resize(function(){for(var e=r.a.get("chart.builder"),i=0;i<e.length;i++)for(var n=e[i],a=0;a<n.length;a++)t.typeCheck("function",n[a].resize)&&n[a].resize()},1e3);var s=function(){var s,h,o,c=[],u=[],l=[],d=null,f={},g=!1,p=null,m={render:[],renderAll:[]},v={main:null,buffer:null,sub:null},x={};function y(t,i){var n=!1;function r(i){var n=e.offset(t.root),r=i.pageX-n.left,a=i.pageY-n.top;if(i.bgX=r,i.bgY=a,i.chartX=r-t.padding("left"),i.chartY=a-t.padding("top"),!(i.chartX<0||i.chartX>t.area("width")||i.chartY<0||i.chartY>t.area("height")))return!0}i.on("click",function(e){r(e)?t.emit("chart.click",[e]):t.emit("bg.click",[e])}),i.on("dblclick",function(e){r(e)?t.emit("chart.dblclick",[e]):t.emit("bg.dblclick",[e])}),i.on("contextmenu",function(e){r(e)?t.emit("chart.rclick",[e]):t.emit("bg.rclick",[e]),e.preventDefault()}),i.on("mousemove",function(e){r(e)?n?t.emit("chart.mousemove",[e]):(t.emit("chart.mouseover",[e]),n=!0):(n&&(t.emit("chart.mouseout",[e]),n=!1),t.emit("bg.mousemove",[e]))}),i.on("mousedown",function(e){r(e)?t.emit("chart.mousedown",[e]):t.emit("bg.mousedown",[e])}),i.on("mouseup",function(e){r(e)?t.emit("chart.mouseup",[e]):t.emit("bg.mouseup",[e])}),i.on("mouseover",function(e){r(e)||t.emit("bg.mouseover",[e])}),i.on("mouseout",function(e){r(e)||t.emit("bg.mouseout",[e])}),i.on("mousewheel",function(e){r(e)?t.emit("chart.mousewheel",[e]):t.emit("bg.mousewheel",[e])})}function w(e,n){if(!t.typeCheck("undefined",n)&&f[n])return"url(#"+f[n]+")";var r,a=t.createId("gradient");return e.attr.id=a,r=i.createObject(e),d.append(r),t.typeCheck("undefined",n)||(f[n]=a),"url(#"+a+")"}function b(e){if(t.typeCheck("string",e)){if(e=e.replace("url(#","").replace(")",""),f[e])return"url(#"+e+")";if(-1==e.indexOf("pattern-"))return!1;var n=e.split("-"),a=n.pop(),s=r.a.include("chart."+n.join("."));return!!s&&("function"==typeof(h=s[a])&&(h=h.call(h)),h.attr&&!h.attr.id&&(h.attr.id=e),h=i.createObject(h),d.append(h),f[e]=e,"url(#"+e+")")}if(e.attr.id=e.attr.id||t.createId("pattern-"),f[e.attr.id])return"url(#"+e.attr.id+")";var h=i.createObject(e);return d.append(h),f[e.attr.id]=e.attr.id,"url(#"+e.attr.id+")"}function k(e){if(t.typeCheck("undefined",e))return"none";if(t.typeCheck("object",e))return"pattern"==e.type?b(e):w(e);if("string"==typeof e){var i=b(e);if(i)return i}var r=n.parse(e);return r==e?e:w(r,e)}function C(e){var i={};t.typeCheck("string",e)?(t.extend(i,r.a.include("chart.theme."+e)),t.extend(i,p.style)):t.typeCheck("object",e)&&(t.extend(o,p.style),t.extend(o,e),t.extend(i,o)),o=i}function M(t,e){var i=e.match(/{([^{}]+)}/g);if(null!=i)for(var n=0;n<i.length;n++){var r=i[n].substring(1,i[n].length-1);e=e.replace(i[n],t.icon(r))}return e}function T(e){var i=e.svg.size();return{width:t.typeCheck("integer",p.width)?p.width:i.width,height:t.typeCheck("integer",p.height)?p.height:i.height}}function A(t,e){let i=T(t),n=v[e];n.restore(),n.clearRect(0,0,i.width,i.height),n.save(),"main"==e&&n.translate(h.x,h.y)}this.init=function(){!function(e){var i=(p=t.deepClone(e.options,{data:!0,bind:!0})).padding;s=t.typeCheck("integer",i)?{left:i,right:i,bottom:i,top:i}:i,t.typeCheck("object",p.bind)&&e.bindUI(0,p.bind),t.typeCheck("array",p.axis)||(p.axis=[p.axis]),t.typeCheck("array",p.brush)||(p.brush=[p.brush]),t.typeCheck("array",p.widget)||(p.widget=[p.widget]),0==p.axis.length&&p.axis.push({data:[]});for(var n=0;n<p.axis.length;n++){var r=p.axis[n];t.extend(r,p.axis[r.extend],!0)}}(this),C(p.theme),function(t){t.style.position="relative",t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.MozUserSelect="none",t.setAttribute("unselectable","on")}(this.root),this.svg=new i(this.root,{width:p.width,height:p.height,"buffered-rendering":"dynamic"}),p.canvas?(!function(t){var e=T(t);for(var i in v){var n=document.createElement("CANVAS");n.setAttribute("width",e.width),n.setAttribute("height",e.height),n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.getContext&&(v[i]=n.getContext("2d"),"buffer"!=i&&t.root.appendChild(n)),"sub"==i&&(n.on=function(t,e){return n.addEventListener(t,function(t){"function"==typeof e&&e.call(this,t)},!1),this})}}(this),y(this,e.find(this.root,"CANVAS")[1])):y(this,this.svg.root),function(){var e=p.icon;if(t.typeCheck(["string","array"],e.path)){for(var i=t.typeCheck("string",e.path)?[e.path]:e.path,n=[],r=0;r<i.length;r++){var a=i[r],s="url("+a+") ";-1!=a.indexOf(".eot")?s+="format('embedded-opentype')":-1!=a.indexOf(".woff")?s+="format('woff')":-1!=a.indexOf(".ttf")?s+="format('truetype')":-1!=a.indexOf(".svg")&&(s+="format('svg')"),n.push(s)}!function(t){(function(){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet})().insertRule(t,0)}("@font-face {font-family: "+e.type+"; font-weight: normal; font-style: normal; src: "+n.join(",")+"}")}}(),this.render()},this.get=function(t,e){var i={axis:c,brush:u,widget:l,padding:s,area:h};return i[t][e]?i[t][e]:i[t]||i},this.axis=function(t){return 0==arguments.length?c:c[t]},this.area=function(e){return t.typeCheck("undefined",h[e])?h:h[e]},this.padding=function(e){return t.typeCheck("undefined",s[e])?s:s[e]},this.color=function(e,i){var n=null;if(1==arguments.length?t.typeCheck("string",e)?n=e:t.typeCheck("integer",e)&&(n=r(e)):t.typeCheck(["array","object"],i)?(n=i[e],t.typeCheck("integer",n)&&(n=r(n))):n=r(),f[n])return"url(#"+f[n]+")";function r(t){var i=o.colors,n=t||e;return n>i.length-1?i[i.length-1]:i[n]}return k(n)},this.icon=function(t){return r.a.include("chart.icon."+p.icon.type)[t]},this.text=function(e,i){return t.typeCheck("string",i)?i=M(this,i):t.typeCheck("undefined",i)&&(i=""),this.svg.text(e,i)},this.texts=function(e,i,n){for(var r=this.svg.group(),a=0;a<i.length;a++)if(t.typeCheck("string",i[a])){var s=(e["font-size"]||10)*(n||1);r.append(this.svg.text(t.extend({y:a*s},e,!0),M(this,i[a])))}return r},this.theme=function(t,e,i){if(0==arguments.length)return o;if(1==arguments.length)return t.indexOf("Color")>-1&&null!=o[t]?k(o[t]):o[t];if(3==arguments.length){var n=t?e:i;return n.indexOf("Color")>-1&&null!=o[n]?k(o[n]):o[n]}},this.format=function(){if(0!=arguments.length){var e=p.format;return t.typeCheck("function",e)?e.apply(this,arguments):arguments[0]}},this.bindUI=function(t,e){var i=this;function n(){i.axis(t).update(e.listData())}"grid.table"==e.module.type?(e.callAfter("update",n),e.callAfter("sort",n),e.callAfter("append",n),e.callAfter("insert",n),e.callAfter("remove",n)):"grid.xtable"==e.module.type&&(e.callAfter("update",n),e.callAfter("sort",n))},this.on=function(e,i,n){t.typeCheck("string",e)&&t.typeCheck("function",i)&&(this.event.push({type:e.toLowerCase(),callback:i}),"render"!=n&&"renderAll"!=n||m[n].push(i))},this.render=function(e){this.svg.reset(e),function(t,e){for(var i=0;i<m.render.length;i++)t.off(m.render[i]);if(m.render=[],!0===e){for(i=0;i<m.renderAll.length;i++)t.off(m.renderAll[i]);m.renderAll=[]}}(this,e),function(t){var e=t.svg.size(),i={width:e.width-(s.left+s.right),height:e.height-(s.top+s.bottom),x:s.left,y:s.top};i.width<0&&(i.width=0),i.height<0&&(i.height=0),i.x2=i.x+i.width,i.y2=i.y+i.height,h=i}(this),this.options.canvas&&(A(this,"main"),A(this,"buffer"),e&&A(this,"sub")),function(e){u=t.deepClone(p.brush),l=t.deepClone(p.widget),d=e.svg.defs(),f={}}(this),function(e){for(var i=t.deepClone(p.axis,{data:!0,origin:!0}),n=0;n<i.length;n++)r.a.defineOptions(a,i[n]),i[n].index=n,c[n]?c[n].reload(i[n]):c[n]=new a(e,p.axis[n],i[n])}(this),function(e){var i=u;if(null!=i)for(var n=0;n<i.length;n++){var a=r.a.include("chart.brush."+i[n].type);r.a.defineOptions(a,i[n]);var s=c[i[n].axis];if(i[n].target)t.typeCheck("string",i[n].target)&&(i[n].target=[i[n].target]);else{var h=[];if(s)for(var o in s.data[0])h.push(o);i[n].target=h}i[n].index=n;var l=new a(e,s,i[n]);l.chart=e,l.axis=s,l.brush=i[n],l.svg=e.svg,l.canvas=v.buffer,l.render()}}(this),function(t,e){var i=l;if(null!=i)for(var n=0;n<i.length;n++){var a=r.a.include("chart.widget."+i[n].type);r.a.defineOptions(a,i[n]),i[n].index=n;var s=new a(t,c[0],i[n]);if(s.chart=t,s.axis=c[0],s.widget=i[n],s.svg=t.svg,s.canvas=v.sub,g&&!s.isRender()&&!0!==e)return;var h=s.render();s.isRender()||t.svg.autoRender(h,!1)}}(this,e),this.options.canvas&&v.main.drawImage(v.buffer.canvas,0,0),this.svg.root.css({"font-family":this.theme("fontFamily")+","+p.icon.type,background:this.theme("backgroundColor")}),this.svg.render(e),this.emit("render",[g]),g=!0},this.appendDefs=function(t){d.append(t)},this.addBrush=function(t){p.brush.push(t),this.isRender()&&this.render()},this.removeBrush=function(t){p.brush.splice(t,1),this.isRender()&&this.render()},this.updateBrush=function(e,i,n){!0===n?p.brush[e]=i:t.extend(p.brush[e],i),this.isRender()&&this.render()},this.addWidget=function(t){p.widget.push(t),this.isRender()&&this.render()},this.removeWidget=function(t){p.widget.splice(t,1),this.isRender()&&this.render()},this.updateWidget=function(e,i,n){!0===n?p.widget[e]=i:t.extend(p.widget[e],i),this.isRender()&&this.render()},this.setTheme=function(t){C(t),this.isRender()&&this.render(!0)},this.setSize=function(t,i){if(2==arguments.length&&(p.width=t,p.height=i),this.svg.size(p.width,p.height),p.canvas)for(var n=e.find(this.root,"CANVAS"),r=T(this),a=0;a<n.length;a++)n[a].setAttribute("width",r.width),n[a].setAttribute("height",r.height);this.isRender()&&this.render(!0)},this.isFullSize=function(){return"100%"==p.width||p.height,!0},this.resize=function(){this.isFullSize()&&this.setSize(),this.isRender()||this.render(!0)},this.isRender=function(){return!g||p.render},this.setCache=function(t,e){x[t]=e},this.getCache=function(t,e){return void 0===x[t]?e:x[t]}};return s.setup=function(){return{width:"100%",height:"100%",padding:{top:50,bottom:50,left:50,right:50},theme:"classic",style:{},brush:[],widget:[],axis:[],bind:null,format:null,render:!0,icon:{type:"classic",path:null},canvas:!1}},s}},z={name:"chart.plane",extend:"core",component:function(){var t=r.a.include("util.base"),e=r.a.include("chart.builder"),i=function(){var i=null,n=[],r=[],a=[],s=0,h={},o={};this.init=function(){var e=this.options,i={type:"range",step:e.step,line:e.line};h.x=t.extend({domain:e.x},i),h.y=t.extend({domain:e.y},i),h.x.orient="bottom",h.y.orient="left",h.z=t.extend({domain:e.z},i),h.depth=e.depth-2*e.padding,h.degree={x:e.dx,y:e.dy,z:e.dz},h.perspective=e.perspective,o.extend=0,o.x={hide:!0},o.y={hide:!0},o.z={hide:!0},"2d"==e.dimension&&(h.perspective=1,h.degree.x=0,h.degree.y=0,h.degree.z=0,h.z.hideText=!0)},this.push=function(e){t.typeCheck("array",e)&&(n[s]||n.push(t.extend({},0==s?h:o)),n[s].data||(n[s].data=[]),n[s].data.push(e))},this.commit=function(t,e){var i=this.options;r.push({type:"canvas.dot3d",color:s,axis:s,symbol:t||i.symbol,size:2*(e||i.r)}),s++},this.append=function(e,i,a){var c=this.options;n.push(t.extend({},0==s?h:o)),n[s].data=e,r.push({type:"canvas.dot3d",color:s,axis:s,symbol:i||c.symbol,size:2*(a||c.r)}),s++},this.render=function(){var o=this.options;if("3d"==o.dimension&&a.push({type:"polygon.rotate3d"}),null!=i&&(i.root.innerHTML="",i=null),0==n.length&&n.push(h),i=e(this.root,{padding:o.padding,width:o.width,height:o.height,axis:n,brush:r,widget:a,canvas:!0,render:!1,style:{gridFaceBackgroundOpacity:.1}}),t.typeCheck("array",o.colors)){for(var c=[],u=0;u<o.colors.length;u++)c.push(i.color(o.colors[u]));i.setTheme({colors:c})}n=[],r=[],a=[],s=0,i.render()}};return i.setup=function(){return{dimension:"2d",width:500,height:500,depth:500,padding:50,x:[-100,100],y:[-100,100],z:[-100,100],step:4,line:!0,symbol:"dot",r:2,perspective:.9,dx:10,dy:5,dz:0,colors:null}},i}};r.a.use(A);var B={name:"chart.animation",extend:"core",component:function(){const t=r.a.include("util.base"),e=r.a.include("chart.builder"),i=function(){let t,i=-1,n=0,r=0;this.init=function(){const i=this.options;if(t=i.interval,delete i.interval,i.axis.length&&i.axis.length>1)throw new Error("JUI_CRITICAL_ERR: the real-time module allows only a single axes");this.builder=e(this.selector,i)},this.run=function(e){const a=this,s=Date.now();if(0==r&&(r=s),s-n>t||0==t){let t=(s-n)/1e3;t>1&&(t=1),this.builder.setCache("tpf",t),this.builder.setCache("fps",1/t),"function"==typeof e&&e.call(this,s-r),this.render(),n=s}i=requestAnimationFrame(function(){a.run(e)})},this.stop=function(){-1!=i&&(cancelAnimationFrame(i),i=-1)},this.set=function(t,e,i){this.builder.axis(0).set(t,e,i)},this.update=function(t){this.builder.axis(0).update(t)},this.render=function(t){this.builder.render(t)}};return i.setup=function(){return t.extend({render:!1,canvas:!0,interval:0},A.component().setup(),!0)},i}},F={name:"chart.polygon.core",extend:null,component:function(){var t=r.a.include("util.base"),e=r.a.include("chart.vector"),i=r.a.include("util.transform"),n=r.a.include("util.math");return function(){this.perspective=.9,this.rotate=function(r,a,s,h,o){var c=this.perspective,u=new i(this.vertices),l=u.matrix("move3d",s,h,o);l=n.matrix3d(l,u.matrix("rotate3dx",a.x)),l=n.matrix3d(l,u.matrix("rotate3dy",a.y)),l=n.matrix3d(l,u.matrix("rotate3dz",a.z)),l=n.matrix3d(l,u.matrix("move3d",-s,-h,-o)),this.vertices=u.custom(l);for(var d=0,f=this.vertices.length;d<f;d++){var g=Math.abs(this.vertices[d][2]-r),p=n.scaleValue(g,0,r,c,1),m=new i,v=m.matrix("move3d",s,h,r/2);v=n.matrix3d(v,m.matrix("scale3d",p,p,p)),v=n.matrix3d(v,m.matrix("move3d",-s,-h,-r/2)),this.vertices[d]=n.matrix3d(v,this.vertices[d]),t.typeCheck("array",this.vectors)&&(null==this.vectors[d]?this.vectors[d]=new e(this.vertices[d][0],this.vertices[d][1],this.vertices[d][2]):(this.vectors[d].x=this.vertices[d][0],this.vectors[d].y=this.vertices[d][1],this.vectors[d].z=this.vertices[d][2]))}},this.min=function(){for(var t={x:this.vertices[0][0],y:this.vertices[0][1],z:this.vertices[0][2]},e=1,i=this.vertices.length;e<i;e++)t.x=Math.min(t.x,this.vertices[e][0]),t.y=Math.min(t.y,this.vertices[e][1]),t.z=Math.min(t.z,this.vertices[e][2]);return t},this.max=function(){for(var t={x:this.vertices[0][0],y:this.vertices[0][1],z:this.vertices[0][2]},e=1,i=this.vertices.length;e<i;e++)t.x=Math.max(t.x,this.vertices[e][0]),t.y=Math.max(t.y,this.vertices[e][1]),t.z=Math.max(t.z,this.vertices[e][2]);return t}}}},L={name:"chart.polygon.grid",extend:"chart.polygon.core",component:function(){return function(t,e,i,n,r,a){e=(r=r||0)+e,i=(a=a||0)+i;var s={center:[new Float32Array([r,a,n,1]),new Float32Array([e,a,n,1]),new Float32Array([e,i,n,1]),new Float32Array([r,i,n,1])],horizontal:[new Float32Array([r,i,0,1]),new Float32Array([e,i,0,1]),new Float32Array([e,i,n,1]),new Float32Array([r,i,n,1])],vertical:[new Float32Array([e,a,0,1]),new Float32Array([e,i,0,1]),new Float32Array([e,i,n,1]),new Float32Array([e,a,n,1])]};this.vertices=s[t],this.vectors=[]}}},D={name:"chart.polygon.line",extend:"chart.polygon.core",component:function(){return function(t,e,i,n,r,a){this.vertices=[new Float32Array([t,e,i,1]),new Float32Array([n,r,a,1])],this.vectors=[]}}},S={name:"chart.polygon.point",extend:"chart.polygon.core",component:function(){return function(t,e,i){this.vertices=[new Float32Array([t,e,i,1])],this.vectors=[]}}},j={name:"chart.polygon.cube",extend:"chart.polygon.core",component:function(){return function(t,e,i,n,r,a){this.vertices=[new Float32Array([t,e,i,1]),new Float32Array([t+n,e,i,1]),new Float32Array([t+n,e,i+a,1]),new Float32Array([t,e,i+a,1]),new Float32Array([t,e+r,i,1]),new Float32Array([t+n,e+r,i,1]),new Float32Array([t+n,e+r,i+a,1]),new Float32Array([t,e+r,i+a,1])],this.faces=[[0,1,2,3],[3,2,6,7],[0,3,7,4],[1,2,6,5],[0,1,5,4],[4,5,6,7]],this.vectors=[]}}},P={name:"chart.grid.draw2d",extend:"chart.draw",component:function(){var t=r.a.include("util.base");return function(){this.createGridX=function(t,e,i,n,r){var a=this.getLineOption(),s=this.chart.svg.group().translate(i,0),h=this.chart.theme("gridTickBorderSize");return s.append(this.line({y2:"bottom"==t?h:-h,stroke:this.color(n,"gridActiveBorderColor","gridXAxisBorderColor"),"stroke-width":this.chart.theme("gridTickBorderWidth")})),a&&this.drawValueLine(t,s,n,a,e,r),s},this.createGridY=function(t,e,i,n,r){var a=this.getLineOption(),s=this.chart.svg.group().translate(0,i),h=this.chart.theme("gridTickBorderSize");return s.append(this.line({x2:"left"==t?-h:h,stroke:this.color(n,"gridActiveBorderColor","gridYAxisBorderColor"),"stroke-width":this.chart.theme("gridTickBorderWidth")})),a&&this.drawValueLine(t,s,n,a,e,r),s},this.fillRectObject=function(t,e,i,n,r,a,s){e.type.indexOf("gradient")>-1?t.append(this.chart.svg.rect({x:n,y:r,height:s,width:a,fill:this.chart.color(e.fill?e.fill:"linear("+i+") "+this.chart.theme("gridPatternColor")+",0.5 "+this.chart.theme("backgroundColor")),"fill-opacity":this.chart.theme("gridPatternOpacity")})):e.type.indexOf("rect")>-1&&t.append(this.chart.svg.rect({x:n,y:r,height:s,width:a,fill:this.chart.color(e.fill?e.fill:this.chart.theme("gridPatternColor")),"fill-opacity":this.chart.theme("gridPatternOpacity")}))},this.drawAxisLine=function(e,i,n){var r="top"==e||"bottom"==e;i.append(this.chart.svg.line(t.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color(r?"gridXAxisBorderColor":"gridYAxisBorderColor"),"stroke-width":this.chart.theme(r?"gridXAxisBorderWidth":"gridYAxisBorderWidth"),"stroke-opacity":1},n)))},this.drawPattern=function(t,e,i,n){if(!this.grid.hide&&t&&e&&i){var r=this.getLineOption(),a="left"==t||"right"==t,s=this.chart.svg.group();if(s.translate(this.axis.area("x")+this.chart.area("x"),this.axis.area("y")+this.chart.area("y")),r&&(r.type.indexOf("gradient")>-1||r.type.indexOf("rect")>-1))for(var h=0;h<i.length-1;h+=2){var o=Math.abs(i[h+1]-i[h]),c=i[h]-(n?o/2:0),u=a?0:c,l=a?c:0,d=a?this.axis.area("width"):o,f=a?o:this.axis.area("height");this.fillRectObject(s,r,t,u,l,d,f)}}},this.drawBaseLine=function(t,e){var i=this.getGridSize(),n={};"bottom"==t||"top"==t?n={x1:i.start,x2:i.end}:"left"!=t&&"right"!=t||(n={y1:i.start,y2:i.end}),this.drawAxisLine(t,e,n)},this.drawValueLine=function(e,i,n,r,a,s){var h={},o=!1;if("top"==e?(o=this.checkDrawLineY(a,s),h={x1:0,x2:0,y1:0,y2:this.axis.area("height")}):"bottom"==e?(o=this.checkDrawLineY(a,s),h={x1:0,x2:0,y1:0,y2:-this.axis.area("height")}):"left"==e?(o=this.checkDrawLineX(a,s),h={x1:0,x2:this.axis.area("width"),y1:0,y2:0}):"right"==e&&(o=this.checkDrawLineX(a,s),h={x1:0,x2:-this.axis.area("width"),y1:0,y2:0}),o){var c=this.line(t.extend({stroke:this.chart.theme(n,"gridActiveBorderColor","gridBorderColor"),"stroke-width":this.chart.theme(n,"gridActiveBorderWidth","gridBorderWidth")},h));if(r.type.indexOf("dashed")>-1){var u=this.chart.theme("gridBorderDashArray");c.attr({"stroke-dasharray":"none"!=u&&u?u:"3,3"})}i.append(c)}},this.drawValueText=function(t,e,i,n,r,a,s){this.grid.hideText||("top"==t?e.append(this.getTextRotate(this.chart.text({x:a,y:-(this.chart.theme("gridTickBorderSize")+2*this.chart.theme("gridTickPadding")),dy:this.chart.theme("gridXFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridXFontColor"),"text-anchor":"middle","font-size":this.chart.theme("gridXFontSize"),"font-weight":this.chart.theme("gridXFontWeight")},r))):"bottom"==t?e.append(this.getTextRotate(this.chart.text({x:a,y:this.chart.theme("gridTickBorderSize")+2*this.chart.theme("gridTickPadding"),dy:this.chart.theme("gridXFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridXFontColor"),"text-anchor":"middle","font-size":this.chart.theme("gridXFontSize"),"font-weight":this.chart.theme("gridXFontWeight")},r))):"left"==t?e.append(this.getTextRotate(this.chart.text({x:-this.chart.theme("gridTickBorderSize")-this.chart.theme("gridTickPadding"),y:a,dy:this.chart.theme("gridYFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridYFontColor"),"text-anchor":"end","font-size":this.chart.theme("gridYFontSize"),"font-weight":this.chart.theme("gridYFontWeight")},r))):"right"==t&&e.append(this.getTextRotate(this.chart.text({x:this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding"),y:a,dy:this.chart.theme("gridYFontSize")/3,fill:this.chart.theme(s,"gridActiveFontColor","gridYFontColor"),"text-anchor":"start","font-size":this.chart.theme("gridYFontSize"),"font-weight":this.chart.theme("gridYFontWeight")},r))))},this.drawImage=function(e,i,n,r,a,s){if(t.typeCheck("function",this.grid.image)){var h=this.grid.image.apply(this.chart,[n,r]);if(t.typeCheck("object",h)){var o=this.chart.svg.image({"xlink:href":h.uri,width:h.width,height:h.height});"top"==e||"bottom"==e?o.attr({x:"block"==this.grid.type?this.scale.rangeBand()/2-h.width/2:-h.width/2}):"left"!=e&&"right"!=e||o.attr({y:"block"==this.grid.type?this.scale.rangeBand()/2-h.height/2:-h.height/2}),"bottom"==e?o.attr({y:h.dist}):"top"==e?o.attr({y:-(h.dist+h.height)}):"left"==e?o.attr({x:-(h.dist+h.width)}):"right"==e&&o.attr({x:h.dist}),o.translate(a,s),i.append(o)}}}}}},R={name:"chart.grid.draw3d",extend:"chart.draw",component:function(){r.a.include("util.base");var t=r.a.include("chart.polygon.grid"),e=r.a.include("chart.polygon.line"),i=r.a.include("chart.polygon.point");return function(){this.createGridX=function(t,e,i,n,r){var a=this.getLineOption(),s=this.svg.group();return a&&this.drawValueLine(t,s,n,a,e,i,r),s},this.createGridY=function(t,e,i,n,r){var a=this.getLineOption(),s=this.svg.group();return a&&this.drawValueLine(t,s,n,a,e,i,r),s},this.drawCenter=function(t,e,i,n,r){var a=this.svg.group(),s=this.getLineOption();s&&this.drawValueLineCenter(a,e,s),this.drawValueTextCenter(a,e,i,n,r),t.append(a)},this.drawBaseLine=function(t,e){var i=this.svg.group();this.drawAxisLine(t,i),e.append(i)},this.drawAxisLine=function(e,i){var n="top"==e||"bottom"==e,r=n?"gridXAxisBorderColor":"gridYAxisBorderColor",a=n?"gridXAxisBorderWidth":"gridYAxisBorderWidth";"center"==e&&(r="gridZAxisBorderColor",a="gridZAxisBorderWidth");var s=this.svg.polygon({stroke:this.chart.theme(r),"stroke-width":this.chart.theme(a),"stroke-opacity":1,fill:this.chart.theme("gridFaceBackgroundColor"),"fill-opacity":this.chart.theme("gridFaceBackgroundOpacity")}),h=null,o=this.axis.area("width"),c=this.axis.area("height"),u=this.axis.area("x"),l=this.axis.area("y"),d=this.axis.depth;h="center"==e?new t("center",o,c,d,u,l):n?new t("horizontal",o,c="bottom"==e?c:0,d,u,l):new t("vertical",o="right"==e?o:0,c,d,u,l),this.calculate3d(h);for(var f=0;f<h.vectors.length;f++)s.point(h.vectors[f].x,h.vectors[f].y);"center"==e?!0!==this.axis.get("y").hide&&i.append(s):i.append(s)},this.drawValueLine=function(t,i,n,r,a,s,h){var o=!1,c=this.axis.area("width"),u=this.axis.area("height"),l=this.axis.area("x"),d=this.axis.area("y"),f=this.axis.depth,g=null,p=null;if("top"==t?(o=this.checkDrawLineY(a,h),g=new e(s,d,0,s,d,f),p=new e(s,d,f,s,d+u,f)):"bottom"==t?(o=this.checkDrawLineY(a,h),g=new e(s,d+u,0,s,d+u,f),p=new e(s,d+u,f,s,d,f)):"left"==t?(o=this.checkDrawLineX(a,h),g=new e(l,s,0,l,s,f),p=new e(l,s,f,l+c,s,f)):"right"==t&&(o=this.checkDrawLineX(a,h),g=new e(l+c,s,0,l+c,s,f),p=new e(l+c,s,f,l,s,f)),o){this.calculate3d(g,p);var m=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:g.vectors[0].x,y1:g.vectors[0].y,x2:g.vectors[1].x,y2:g.vectors[1].y}),v=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:p.vectors[0].x,y1:p.vectors[0].y,x2:p.vectors[1].x,y2:p.vectors[1].y});if(r.type.indexOf("dashed")>-1){var x=this.chart.theme("gridBorderDashArray"),y="none"!=x&&x?x:"3,3";m.attr({"stroke-dasharray":y}),v.attr({"stroke-dasharray":y})}i.append(m),!0!==this.axis.get("y").hide&&i.append(v)}},this.drawValueLineCenter=function(t,i,n){for(var r="block"!=this.grid.type?i.length-1:i.length,a=this.axis.area("width"),s=this.axis.area("height"),h=this.axis.area("x"),o=this.axis.area("y"),c=this.axis.depth,u="left"==this.axis.get("y").orient?0:a,l="top"==this.axis.get("x").orient?0:s,d=1;d<r;d++){var f=d*(c/r),g=new e(h,o+l,f,h+a,o+l,f),p=new e(h+u,o,f,h+u,o+s,f);this.calculate3d(g,p);var m=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:g.vectors[0].x,y1:g.vectors[0].y,x2:g.vectors[1].x,y2:g.vectors[1].y}),v=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:p.vectors[0].x,y1:p.vectors[0].y,x2:p.vectors[1].x,y2:p.vectors[1].y});if(n.type.indexOf("dashed")>-1){var x=this.chart.theme("gridBorderDashArray"),y="none"!=x&&x?x:"3,3";m.attr({"stroke-dasharray":y}),v.attr({"stroke-dasharray":y})}t.append(m),!0!==this.axis.get("y").hide&&t.append(v)}},this.drawValueText=function(t,e,n,r,a){if(!this.grid.hideText){var s="left"==t||"right"==t,h=this.chart.theme("gridTickBorderSize"),o=this.chart.theme("gridTickPadding"),c=this.axis.area("width"),u=this.axis.area("height"),l=this.axis.area("x"),d=this.axis.area("y"),f=0,g=0;"top"==t?(f=r,g=d+-(h+2*o)):"bottom"==t?(f=r,g=d+(u+h+2*o)):"left"==t?(f=l+-(h+o),g=r):"right"==t&&(f=l+(c+h+o),g=r);var p=new i(f,g,0);this.calculate3d(p),e.append(this.getTextRotate(this.chart.text({x:p.vectors[0].x,y:p.vectors[0].y,dx:s?0:this.chart.theme("gridXFontSize")/3,dy:s?this.chart.theme("gridYFontSize")/3:0,fill:this.chart.theme(s?"gridYFontColor":"gridXFontColor"),"text-anchor":s?"left"==t?"end":"start":"middle","font-size":this.chart.theme(s?"gridYFontSize":"gridXFontSize"),"font-weight":this.chart.theme(s?"gridYFontWeight":"gridXFontWeight")},a)))}},this.drawValueTextCenter=function(t,e,n,r,a){if(!this.grid.hideText)for(var s=this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding"),h="left"==this.axis.get("y").orient,o="top"==this.axis.get("x").orient,c="block"!=this.grid.type?e.length-1:e.length,u=this.axis.area("width"),l=this.axis.area("height"),d=this.axis.depth,f=this.axis.area("x")+(h?u+s:-s),g=this.axis.area("y")+(o?-s:l+s),p=0;p<e.length;p++){var m=this.format(e[p],p),v=new i(f,g,p*(d/c)+a);this.calculate3d(v),t.append(this.getTextRotate(this.chart.text({x:v.vectors[0].x,y:v.vectors[0].y,fill:this.chart.theme("gridZFontColor"),"text-anchor":h?"start":"end","font-size":this.chart.theme("gridZFontSize"),"font-weight":this.chart.theme("gridZFontWeight")},m)))}},this.drawPattern=function(){},this.drawImage=function(){}}}},Y={name:"chart.grid.core",extend:"chart.draw",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.math"),i=r.a.include("chart.grid.draw2d"),n=r.a.include("chart.grid.draw3d"),a=function(){this.wrapper=function(t,e){return t},this.line=function(e){return this.chart.svg.line(t.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),"stroke-dasharray":this.chart.theme("gridBorderDashArray"),"stroke-opacity":this.chart.theme("gridBorderOpacity")},e))},this.color=function(t){var e=this.grid.color;return 3==arguments.length?null!=e?this.chart.color(e):this.chart.theme.apply(this.chart,arguments):null!=e?this.chart.color(e):this.chart.theme(t)},this.data=function(t,e){return this.axis.data&&this.axis.data[t]?this.axis.data[t][e]||this.axis.data[t]:this.axis.data||[]},this.getGridSize=function(){var t=this.grid.orient,i=this.axis.depth,n=this.axis.degree,r="left"==t||"right"==t?this.axis.area("y"):this.axis.area("x"),a="left"==t||"right"==t?this.axis.area("height"):this.axis.area("width"),s={start:r,size:a,end:r+a};if(this.axis.isFull3D())"center"==t&&(s.start=0,s.size=i,s.end=i);else if(i>0||n>0){var h=e.radian(360-n),o=Math.cos(h)*i,c=Math.sin(h)*i;"left"==t?(s.start=s.start-c,s.size=s.size-c):"bottom"==t&&(s.end=s.end-o,s.size=s.size-o)}return s},this.getDefaultOffset=function(){var t=this.grid.orient,e=this.axis.area(),i=e.width,n=e.height,r="left"==t||"right"==t?e.y:e.x,a="left"==t||"right"==t?n:i;return{start:r,size:a,end:r+a}},this.getTextRotate=function(e){var i=this.grid.textRotate;if(null==i)return e;t.typeCheck("function",i)&&(i=i.apply(this.chart,[e]));var n=e.attr("x"),r=e.attr("y");return e.rotate(i,n,r),e},this.getLineOption=function(){var t=this.grid.line;return"string"==typeof t?t={type:t||"solid"}:"number"==typeof t?t={type:"solid","stroke-width":t}:"object"!=typeof t&&(t=!!t)&&(t={type:"solid"}),t&&"string"==!t.type&&(t.type=t.type.split(/ /g)),t},this.checkDrawLineY=function(t,e){var i=this.axis.get("y");if(!i.hide){if("left"==i.orient&&0==t&&!this.grid.realtime)return!1;if("right"==i.orient&&e)return!1}return!0},this.checkDrawLineX=function(t,e){var i=this.axis.get("x");if(!i.hide){if("top"==i.orient&&0==t)return!1;if("bottom"==i.orient&&e&&!this.grid.realtime)return!1}return!0},this.drawTop=function(e,i,n,r,a){for(var s=0,h=i.length;s<h;s++){var o=this.format(i[s],s),c=n[s]-a,u=s==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("top",e,i[s],s,c,0),o||0===o){t.typeCheck("function",r)&&(l=r(i[s]));var d=this.createGridX("top",s,c,l,u);this.drawValueText("top",d,s,n[s],o,a,l),e.append(d)}}},this.drawBottom=function(e,i,n,r,a){for(var s=0,h=i.length;s<h;s++){var o=this.format(i[s],s),c=n[s]-a,u=s==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("bottom",e,i[s],s,c,0),o||0===o){t.typeCheck("function",r)&&(l=r(i[s]));var d=this.createGridX("bottom",s,c,l,u);this.drawValueText("bottom",d,s,n[s],o,a,l),e.append(d)}}},this.drawLeft=function(e,i,n,r,a){for(var s=0,h=i.length;s<h;s++){var o=this.format(i[s],s),c=n[s]-a,u=s==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("left",e,i[s],s,0,c),o||0===o){t.typeCheck("function",r)&&(l=r(i[s]));var d=this.createGridY("left",s,c,l,u);this.drawValueText("left",d,s,n[s],o,a,l),e.append(d)}}},this.drawRight=function(e,i,n,r,a){for(var s=0,h=i.length;s<h;s++){var o=this.format(i[s],s),c=n[s]-a,u=s==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("right",e,i[s],s,0,c),o||0===o){t.typeCheck("function",r)&&(l=r(i[s]));var d=this.createGridY("right",s,c,l,u);this.drawValueText("right",d,s,n[s],o,a,l),e.append(d)}}},this.drawGrid=function(){var e=this.chart.svg.group(),r=this[this.grid.orient],a=this.axis.isFull3D()?n:i;return this.scale=this.wrapper(this.scale,this.grid.key),t.typeCheck("function",r)&&(a.call(this),r.call(this,e)),this.grid.hide&&e.attr({display:"none"}),{root:e,scale:this.scale}},this.drawAfter=function(t){t.root.attr({class:"grid-"+this.grid.type}),t.root.translate(this.chart.area("x"),this.chart.area("y"))}};return a.setup=function(){return{dist:0,orient:null,hide:!1,color:null,title:null,line:!1,format:null,image:null,textRotate:null}},a}},O={name:"chart.grid.block",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.scale"),i=function(){this.center=function(t){this.drawCenter(t,this.domain,this.points,null,this.half_band),this.drawBaseLine("center",t)},this.top=function(t){this.drawPattern("top",this.domain,this.points,!0),this.drawTop(t,this.domain,this.points,null,this.half_band),this.drawBaseLine("top",t),t.append(this.createGridX("top",this.domain.length,this.end,null,!0))},this.bottom=function(t){this.drawPattern("bottom",this.domain,this.points,!0),this.drawBottom(t,this.domain,this.points,null,this.half_band),this.drawBaseLine("bottom",t),t.append(this.createGridX("bottom",this.domain.length,this.end,null,!0))},this.left=function(t){this.drawPattern("left",this.domain,this.points,!0),this.drawLeft(t,this.domain,this.points,null,this.half_band),this.drawBaseLine("left",t),t.append(this.createGridY("left",this.domain.length,this.end,null,!0))},this.right=function(t){this.drawPattern("right",this.domain,this.points,!0),this.drawRight(t,this.domain,this.points,null,this.half_band),this.drawBaseLine("right",t),t.append(this.createGridY("right",this.domain.length,this.end,null,!0))},this.initDomain=function(){var e=[];if(t.typeCheck("string",this.grid.domain)){var i=this.grid.domain,n=this.data();if(this.grid.reverse)var r=n.length-1,a=0,s=-1;else r=0,a=n.length-1,s=1;for(var h=r;this.grid.reverse?h>=a:h<=a;h+=s)e.push(n[h][i])}else t.typeCheck("function",this.grid.domain)?e=this.grid.domain.call(this.chart):t.typeCheck("array",this.grid.domain)&&(e=this.grid.domain);return this.grid.reverse&&e.reverse(),e},this.wrapper=function(e,i){var n=e,r=this,a=r.domain.length,s=r.grid.reverse;return i?t.extend(function(t){return n("number"==typeof t&&i?r.axis.data[t][i]:s?a-t-1:t)},n):n},this.drawBefore=function(){var t=this.initDomain(),i=this.getGridSize(),n=[i.start,i.end];this.scale=e.ordinal().domain(t),this.scale.rangePoints(n),this.start=i.start,this.size=i.size,this.end=i.end,this.points=this.scale.range(),this.domain=this.scale.domain(),this.band=this.scale.rangeBand(),this.half_band=this.band/2,this.bar=6,this.reverse=this.grid.reverse},this.draw=function(){return this.drawGrid("block")}};return i.setup=function(){return{domain:null,reverse:!1,max:10,hideText:!1,key:null}},i}},I={name:"chart.grid.date",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.scale"),i=r.a.include("util.time"),n=function(){this.center=function(t){this.drawCenter(t,this.ticks,this.values,null,0),this.drawBaseLine("center",t)},this.top=function(t){this.drawPattern("top",this.ticks,this.values),this.drawTop(t,this.ticks,this.values,null,0),this.drawBaseLine("top",t)},this.bottom=function(t){this.drawPattern("bottom",this.ticks,this.values),this.drawBottom(t,this.ticks,this.values,null,0),this.drawBaseLine("bottom",t)},this.left=function(t){this.drawPattern("left",this.ticks,this.values),this.drawLeft(t,this.ticks,this.values,null,0),this.drawBaseLine("left",t)},this.right=function(t){this.drawPattern("right",this.ticks,this.values),this.drawRight(t,this.ticks,this.values,null,0),this.drawBaseLine("right",t)},this.wrapper=function(e,i){var n=e,r=this;return i?t.extend(function(t){return n("number"==typeof t?r.axis.data[t][i]:+t)},n):n},this.initDomain=function(){var e=[],i=[],n=this.grid.min||void 0,r=this.grid.max||void 0,a=this.data(),s=[];if(t.typeCheck("string",this.grid.domain)){if(a.length>0){var h=this.grid.domain;s.push(+a[0][h]),s.push(+a[a.length-1][h])}}else if(t.typeCheck("function",this.grid.domain))for(var o=a.length;o--;){var c=this.grid.domain.call(this.chart,a[o]);t.typeCheck("array",c)?(s[o]=Math.max.apply(Math,c),s.push(Math.min.apply(Math,c))):s[o]=c}else s=this.grid.domain;return t.typeCheck("undefined",n)&&s.length>0&&(n=Math.min.apply(Math,s)),t.typeCheck("undefined",r)&&s.length>0&&(r=Math.max.apply(Math,s)),e=[n,r],i=this.grid.interval,this.grid.reverse&&e.reverse(),t.typeCheck("function",i)?this.interval=i.call(this.chart,e):this.interval=i,e},this.drawBefore=function(){var t=this.initDomain(),n=this.getGridSize(),r=[n.start,n.end];if(this.scale=e.time().domain(t).range(r),this.scale.clamp(this.grid.clamp),this.ticks=[],null!=this.grid.realtime&&i[this.grid.realtime]==this.grid.realtime)var a=this.scale.realTicks(this.grid.realtime,this.interval);else a=this.scale.ticks("milliseconds",this.interval);"string"==typeof this.grid.format&&function(t,e){t.format=function(t){return i.format(t,e)}}(this.grid,this.grid.format),this.start=n.start,this.size=n.size,this.end=n.end,this.bar=6,this.values=[];for(var s=0,h=a.length;s<h;s++){var o=this.scale(a[s]);o>=n.start&&o<=n.end&&(this.values.push(o),this.ticks.push(a[s]))}},this.draw=function(){return this.drawGrid("date")}};return n.setup=function(){return{domain:null,interval:1e3,min:null,max:null,reverse:!1,key:null,realtime:null,hideText:!1}},n}},X={name:"chart.grid.dateblock",extend:"chart.grid.date",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.scale"),i=r.a.include("util.time");return function(){this.wrapper=function(t,e){var i=t,n=this;return i.rangeBand=function(){return n.grid.unit},i},this.initDomain=function(){var e=[],i=[],n=this.grid.min||void 0,r=this.grid.max||void 0,a=this.data(),s=[];if(t.typeCheck("string",this.grid.domain)){var h=this.grid.domain;s.push(+a[0][h]),s.push(+a[a.length-1][h])}else if(t.typeCheck("function",this.grid.domain))for(var o=a.length;o--;){var c=this.grid.domain.call(this.chart,a[o]);t.typeCheck("array",c)?(s[o]=+Math.max.apply(Math,c),s.push(+Math.min.apply(Math,c))):s[o]=+c}else s=this.grid.domain;return t.typeCheck("undefined",n)&&(n=Math.min.apply(Math,s)),t.typeCheck("undefined",r)&&(r=Math.max.apply(Math,s)),e=[n,r],i=this.grid.interval,this.grid.reverse&&e.reverse(),t.typeCheck("function",i)?e.interval=i.call(this.chart,e):e.interval=i,e},this.drawBefore=function(){var n=this.initDomain(),r=this.getGridSize(),a=[r.start,r.end],s=e.time().domain(n).rangeRound(a);null!=this.grid.realtime&&i[this.grid.realtime]==this.grid.realtime?this.ticks=s.realTicks(this.grid.realtime,n.interval):this.ticks=s.ticks("milliseconds",n.interval);var h=this.axis.data.length-1,o=this.grid.unit=Math.abs(a[0]-a[1])/h;"string"==typeof this.grid.format&&function(t,e){t.format=function(t){return i.format(t,e)}}(this.grid,this.grid.format),this.start=r.start,this.size=r.size,this.end=r.end,this.bar=6,this.values=[];var c=0;for(h=this.ticks.length;c<h;c++)this.values[c]=s(this.ticks[c]);var u=this;this.scale=t.extend(function(t){return u.start+t*o},s)},this.draw=function(){return this.drawGrid("dateblock")}}}},N={name:"chart.grid.fullblock",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.scale"),i=function(){this.center=function(t){this.drawCenter(t,this.domain,this.points,null,0),this.drawBaseLine("center",t)},this.top=function(t){this.drawPattern("top",this.domain,this.points),this.drawTop(t,this.domain,this.points,null,0),this.drawBaseLine("top",t)},this.bottom=function(t){this.drawPattern("bottom",this.domain,this.points),this.drawBottom(t,this.domain,this.points,null,0),this.drawBaseLine("bottom",t)},this.left=function(t){this.drawPattern("left",this.domain,this.points),this.drawLeft(t,this.domain,this.points,null,0),this.drawBaseLine("left",t)},this.right=function(t){this.drawPattern("right",this.domain,this.points),this.drawRight(t,this.domain,this.points,null,0),this.drawBaseLine("right",t)},this.initDomain=function(){var e=[];if(t.typeCheck("string",this.grid.domain)){var i=this.grid.domain,n=this.data();if(this.grid.reverse)var r=n.length-1,a=0,s=-1;else r=0,a=n.length-1,s=1;for(var h=r;this.grid.reverse?h>=a:h<=a;h+=s)e.push(n[h][i])}else t.typeCheck("function",this.grid.domain)?e=this.grid.domain.call(this.chart):t.typeCheck("array",this.grid.domain)&&(e=this.grid.domain);return this.grid.reverse&&e.reverse(),e},this.wrapper=function(e,i){var n=e,r=this,a=r.domain.length,s=r.grid.reverse;return i?t.extend(function(t){return n("number"==typeof t&&i?r.axis.data[t][i]:s?a-t:t)},n):n},this.drawBefore=function(){var t=this.initDomain(),i=this.getGridSize();this.scale=e.ordinal().domain(t);var n=[i.start,i.end];this.scale.rangeBands(n),this.start=i.start,this.size=i.size,this.end=i.end,this.points=this.scale.range(),this.domain=this.scale.domain(),this.band=this.scale.rangeBand(),this.half_band=0,this.bar=6,this.reverse=this.grid.reverse},this.draw=function(){return this.drawGrid("fullblock")}};return i.setup=function(){return{domain:null,reverse:!1,max:10,hideText:!1}},i}},W={name:"chart.grid.radar",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.math"),i=function(){var i=this,n=[];function r(t,e,n,r,a,s){var h=Math.abs(a),o=e,c=n;t.append(i.chart.svg.circle({cx:o,cy:c,r:h,"fill-opacity":0,stroke:i.color("gridBorderColor"),"stroke-width":i.chart.theme("gridBorderWidth")}))}function a(t,n,r,a,s,h,o){var c=i.chart.svg.group(),u=[];u.push([n+a,r+s]);for(var l=a,d=s,f=0;f<h;f++){var g=e.rotate(l,d,o);l=g.x,d=g.y,u.push([n+g.x,r+g.y])}var p=i.chart.svg.path({fill:"none",stroke:i.color("gridBorderColor"),"stroke-width":i.chart.theme("gridBorderWidth")});for(f=0;f<u.length;f++){var m=u[f];0==f?p.MoveTo(m[0],m[1]):p.LineTo(m[0],m[1])}p.LineTo(u[0][0],u[0][1]),c.append(p),t.append(c)}function s(t){var n=i.grid.max,r=i.chart.padding("left"),a=i.chart.padding("top");return function(s,h){var o=h/n,c=(Math.abs(t.y1)-Math.abs(t.y2))*o,u=2*Math.PI/i.domain.length,l=t.x1,d=t.y1,f=-c,g=e.rotate(0,f,u*s);return{x:r+l+g.x,y:a+d+g.y}}}this.initDomain=function(){var e=[];if(t.typeCheck("string",this.grid.domain)){var i=this.grid.domain,n=this.data();if(this.grid.reverse)var r=n.length-1,a=0,s=-1;else r=0,a=n.length-1,s=1;for(var h=r;this.grid.reverse?h>=a:h<=a;h+=s)e.push(n[h][i])}else e=t.typeCheck("function",this.grid.domain)?this.grid.domain(this.chart,this.grid):this.grid.domain;return this.grid.reverse&&e.reverse(),e},this.drawBefore=function(){this.domain=this.initDomain()},this.draw=function(){var t=this.axis.area("width"),i=this.axis.area("height"),h=t;i<h&&(h=i);var o=h/2,c=this.axis.area("x")+t/2,u=this.axis.area("y")+i/2,l=-o,d=0,f=this.domain.length,g=this.grid.step,p=2*Math.PI/f,m=Math.abs(l)/g,v=this.chart.svg.group(),x=this.chart.svg.group();v.append(x),n=[];for(var y=0;y<f;y++){var w=c+d,b=u+l;x.append(this.chart.svg.line({x1:c,y1:u,x2:w,y2:b,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),n[y]={x1:c,y1:u,x2:w,y2:b};var k=b,C=w,M="middle";b>u?k=b+20:b<u&&(k=b-10),w>c?(M="start",C+=10):w<c&&(M="end",C-=10),this.grid.hideText||x.append(this.chart.text({x:C,y:k,"text-anchor":M,"font-size":this.chart.theme("gridCFontSize"),"font-weight":this.chart.theme("gridCFontWeight"),fill:this.chart.theme("gridCFontColor")},this.domain[y]));var T=e.rotate(d,l,p);d=T.x,l=T.y}if(!this.grid.line)return{root:x,scale:s(n[0])};l=-o;var A=0,z=this.grid.max/this.grid.step;for(y=0;y<g;y++)0==y&&this.grid.extra?l+=m:("circle"==this.grid.shape?r(x,c,u,0,l):a(x,c,u,0,l,f,p),this.grid.hideText||x.append(this.chart.text({x:c,y:u+(l+m-5),"font-size":this.chart.theme("gridCFontSize"),"font-weight":this.chart.theme("gridCFontWeight"),fill:this.chart.theme("gridCFontColor")},this.grid.max-A+"")),l+=m,A+=z);return this.grid.hide&&x.attr({display:"none"}),{root:x,scale:s(n[0])}}};return i.setup=function(){return{domain:null,reverse:!1,max:100,step:10,line:!0,hideText:!1,extra:!1,shape:"radial"}},i}},G={name:"chart.grid.range",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.math"),i=r.a.include("util.scale"),n=function(){this.center=function(t){var e=this.scale.min(),i=this.scale.max();this.drawCenter(t,this.ticks,this.values,function(t){return 0==t&&t!=e&&t!=i},0),this.drawBaseLine("center",t)},this.top=function(t){this.drawPattern("top",this.ticks,this.values);var e=this.scale.min(),i=this.scale.max();this.drawTop(t,this.ticks,this.values,function(t){return 0==t&&t!=e&&t!=i},0),this.drawBaseLine("top",t)},this.bottom=function(t){this.drawPattern("bottom",this.ticks,this.values);var e=this.scale.min(),i=this.scale.max();this.drawBottom(t,this.ticks,this.values,function(t){return 0==t&&t!=e&&t!=i},0),this.drawBaseLine("bottom",t)},this.left=function(t){this.drawPattern("left",this.ticks,this.values);var e=this.scale.min(),i=this.scale.max();this.drawLeft(t,this.ticks,this.values,function(t){return 0==t&&t!=e&&t!=i},0),this.drawBaseLine("left",t)},this.right=function(t){this.drawPattern("right",this.ticks,this.values);var e=this.scale.min(),i=this.scale.max();this.drawRight(t,this.ticks,this.values,function(t){return 0==t&&t!=e&&t!=i},0),this.drawBaseLine("right",t)},this.wrapper=function(e,i){var n=e,r=this;return i?t.extend(function(t){return n(r.axis.data[t][i])},n):n},this.initDomain=function(){var i=[],n=this.grid.min||void 0,r=this.grid.max||void 0,a=this.data(),s=[],h=!1;if(t.typeCheck("string",this.grid.domain)){var o=this.grid.domain;s=new Array(a.length);for(var c=a.length;c--;){var u=a[c][o];t.typeCheck("array",u)?(s[c]=Math.max(u),s.push(Math.min(u))):(s[c]=u,s.push(0))}}else if(t.typeCheck("function",this.grid.domain)){s=new Array(a.length);var l=!1;for(c=a.length;c--;){u=this.grid.domain.call(this.chart,a[c]);t.typeCheck("array",u)?(s[c]=Math.max.apply(Math,u),s.push(Math.min.apply(Math,u))):(s[c]=u,l||(s.push(0),l=!0))}}else s=this.grid.domain,h=!0;var d,f=Math.min.apply(Math,s),g=Math.max.apply(Math,s);h?(n=f,r=g):((void 0===n||n>f)&&(n=f),(void 0===r||r<g)&&(r=g));if(t.typeCheck("function",this.grid.unit)?d=this.grid.unit.call(this.chart,this.grid):t.typeCheck("number",this.grid.unit)?d=this.grid.unit:(n>0&&(n=Math.floor(n)),(d=e.div(r-n,this.grid.step))>1?d=Math.ceil(d):0<d&&d<1&&(d=e.div(Math.ceil(e.multi(d,10)),10))),0==d)i=[0,0];else{for(var p=0,m=e.fixed(d);p<r;)p=m.plus(p,d);for(var v=p;v>n;)v=m.minus(v,d);(i=[v,p]).step=Math.abs(v-p)/d}return this.grid.reverse&&i.reverse(),i},this.drawBefore=function(){var t=this.initDomain(),e=this.getGridSize();if(this.scale=i.linear().domain(t),"left"==this.grid.orient||"right"==this.grid.orient)var n=[e.end,e.start];else n=[e.start,e.end];this.scale.range(n),this.scale.clamp(this.grid.clamp),this.start=e.start,this.size=e.size,this.end=e.end,this.step=t.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),"left"!=this.grid.orient&&"right"!=this.grid.orient||this.ticks.reverse(),this.bar=6,this.values=[];for(var r=0,a=this.ticks.length;r<a;r++)this.values[r]=this.scale(this.ticks[r])},this.draw=function(){return this.drawGrid("range")}};return n.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,clamp:!0,reverse:!1,key:null,hideText:!1,nice:!1}},n}},E={name:"chart.grid.log",extend:"chart.grid.range",component:function(){var t=r.a.include("util.scale"),e=function(){this.drawBefore=function(){this.grid.unit=!1;var e=this.initDomain(),i=this.getGridSize();if(this.scale=t.log(this.grid.base).domain(e),"left"==this.grid.orient||"right"==this.grid.orient)var n=[i.end,i.start];else n=[i.start,i.end];this.scale.range(n),this.start=i.start,this.size=i.size,this.end=i.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),"left"!=this.grid.orient&&"right"!=this.grid.orient||this.ticks.reverse(),this.bar=6,this.values=[];for(var r=0,a=this.ticks.length;r<a;r++)this.values[r]=this.scale(this.ticks[r])},this.draw=function(){return this.drawGrid("log")}};return e.setup=function(){return{base:10,step:4,nice:!1,hideText:!1}},e}},V={name:"chart.grid.rule",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.scale"),i=function(){this.top=function(t){var e=this.axis.area("height")/2;t.append(this.axisLine({y1:this.center?e:0,y2:this.center?e:0,x1:this.start,x2:this.end}));for(var i=this.ticks,n=this.values,r=this.bar,a=0;a<i.length;a++){var s=this.format(i[a],a);if(s||0===s){var h=0==i[a],o=this.chart.svg.group().translate(n[a],this.center?e:0);o.append(this.line({y1:this.center?-r:0,y2:r,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!h||h&&!this.hideZero)&&o.append(this.getTextRotate(this.chart.text({x:0,y:r+r+4,"text-anchor":"middle",fill:this.chart.theme("gridFontColor")},s))),t.append(o)}}},this.bottom=function(t){var e=this.axis.area("height")/2;t.append(this.axisLine({y1:this.center?-e:0,y2:this.center?-e:0,x1:this.start,x2:this.end}));for(var i=this.ticks,n=this.values,r=this.bar,a=0;a<i.length;a++){var s=this.format(i[a],a);if(s||0===s){var h=0==i[a],o=this.chart.svg.group().translate(n[a],this.center?-e:0);o.append(this.line({y1:this.center?-r:0,y2:this.center?r:-r,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!h||h&&!this.hideZero)&&o.append(this.getTextRotate(this.chart.text({x:0,y:2*-r,"text-anchor":"middle",fill:this.chart.theme(h,"gridActiveFontColor","gridFontColor")},s))),t.append(o)}}},this.left=function(t){var e=this.axis.area("width"),i=(this.axis.area("height"),e/2);t.append(this.axisLine({x1:this.center?i:0,x2:this.center?i:0,y1:this.start,y2:this.end}));for(var n=this.ticks,r=this.values,a=this.bar,s=0;s<n.length;s++){var h=this.format(n[s],s);if(h||0===h){var o=0==n[s],c=this.chart.svg.group().translate(this.center?i:0,r[s]);c.append(this.line({x1:this.center?-a:0,x2:a,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!o||o&&!this.hideZero)&&c.append(this.getTextRotate(this.chart.text({x:a/2+4,y:a-2,fill:this.chart.theme("gridFontColor")},h))),t.append(c)}}},this.right=function(t){var e=this.axis.area("width")/2;t.append(this.axisLine({x1:this.center?-e:0,x2:this.center?-e:0,y1:this.start,y2:this.end}));for(var i=this.ticks,n=this.values,r=this.bar,a=0;a<i.length;a++){var s=this.format(i[a],a);if(s||0===s){var h=0==i[a],o=this.chart.svg.group().translate(this.center?-e:0,n[a]);o.append(this.line({x1:this.center?-r:0,x2:this.center?r:-r,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!h||h&&!this.hideZero)&&o.append(this.getTextRotate(this.chart.text({x:-r-4,y:r-2,"text-anchor":"end",fill:this.chart.theme("gridFontColor")},s))),t.append(o)}}},this.wrapper=function(e,i){var n=e,r=this;return i?t.extend(function(t){return n(r.axis.data[t][i])},n):n},this.initDomain=function(){var e=[],i=this.grid.min||void 0,n=this.grid.max||void 0,r=this.data(),a=[];if(t.typeCheck("string",this.grid.domain)){var s=this.grid.domain;a=new Array(r.length);for(var h=0,o=r.length;h<o;h++){var c=r[h][s];t.typeCheck("array",c)?(a[h]=Math.max(c),a.push(Math.min(c))):a[h]=c}}else if(t.typeCheck("function",this.grid.domain)){a=new Array(r.length);for(h=0,o=r.length;h<o;h++){c=this.grid.domain.call(this.chart,r[h]);t.typeCheck("array",c)?(a[h]=Math.max.apply(Math,c),a.push(Math.min.apply(Math,c))):a[h]=c}}else a=grid.domain;var u,l=Math.min.apply(Math,a),d=Math.max.apply(Math,a);if(void 0===i&&(i=l),void 0===n&&(n=d),this.grid.max=n,this.grid.min=i,0==(u=t.typeCheck("function",this.grid.unit)?this.grid.unit.call(this.chart,this.grid):t.typeCheck("number",this.grid.unit)?this.grid.unit:Math.ceil((n-i)/this.grid.step)))e=[0,0];else{for(var f=0;f<n;)f+=u;for(var g=f;g>i;)g-=u;e=[g,f]}return this.grid.reverse&&e.reverse(),e},this.drawBefore=function(){var t=this.initDomain(),i=this.getGridSize();if(this.scale=e.linear().domain(t),"left"==this.grid.orient||"right"==this.grid.orient)var n=[i.end,i.start];else n=[i.start,i.end];this.scale.range(n),this.start=i.start,this.size=i.size,this.end=i.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),this.bar=6,this.hideZero=this.grid.hideZero,this.center=this.grid.center,this.values=[];for(var r=0,a=this.ticks.length;r<a;r++)this.values[r]=this.scale(this.ticks[r])},this.draw=function(){return this.drawGrid(chart,orient,"rule",grid)}};return i.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,clamp:!0,reverse:!1,key:null,hideText:!1,hideZero:!1,nice:!1,center:!1}},i}},H={name:"chart.grid.panel",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base");return function(){this.custom=function(e){var i=this.scale(0);i.x-=this.axis.area("x"),i.y-=this.axis.area("y"),e.append(this.chart.svg.rect(t.extend(i,{fill:"transparent",stroke:"transparent"})))},this.drawBefore=function(){this.scale=function(t){return function(e){return{x:t.area("x"),y:t.area("y"),width:t.area("width"),height:t.area("height")}}}(this.axis)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("panel")}}}},U={name:"chart.grid.table",extend:"chart.grid.core",component:function(){var t=function(t,e,i){this.custom=function(t){for(var e=0;e<void 0;e++)for(var i=0;i<void 0;i++){var n=void 0*e+i,r=this.scale(n);r.x-=this.axis.area("x"),r.y-=this.axis.area("y");this.chart.svg.rect(_.extend(r,{fill:"tranparent",stroke:"black"}))}},this.drawBefore=function(){var t=this.grid.rows,e=this.grid.columns,i=this.grid.padding,n=(this.axis.area("width")-(e-1)*i)/e,r=(this.axis.area("height")-(t-1)*i)/t;this.scale=function(t,e,n,r,a){return function(e){var s=Math.floor(e/n),h=e%n,o=h*a,c=s*r,u=i*h,l=i*s;return{x:t.area("x")+o+u,y:t.area("y")+c+l,width:a,height:r}}}(this.axis,0,e,r,n)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("table")}};return t.setup=function(){return{rows:1,columns:1,padding:10}},t}},Z={name:"chart.grid.overlap",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=function(){var e,i,n,r,a;this.custom=function(){for(var e=0,i=this.axis.data.length;e<i;e++){var n=this.scale(e);n.x-=this.axis.area("x"),n.y-=this.axis.area("y"),this.chart.svg.rect(t.extend(n,{fill:"transparent",stroke:"transparent"}))}},this.drawBefore=function(){e=this.grid.count||this.axis.data.length||1,i=this.axis.area("width")/2/e,n=this.axis.area("height")/2/e,r=this.axis.area("width"),a=this.axis.area("height"),this.scale=function(t){return function(e){var s=e*i,h=e*n;return{x:t.area("x")+s,y:t.area("y")+h,width:2*Math.abs(r/2-s),height:2*Math.abs(a/2-h)}}}(this.axis)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("overlap")}};return e.setup=function(){return{count:null}},e}},q={name:"chart.grid.grid3d",extend:"chart.grid.core",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.math"),i=function(){var i=this,n=0,r=0,a=0;function s(t){var e=null;return t.each(function(t,i){"line"==i.element.nodeName&&(e=i.attributes)}),e}this.drawBefore=function(){n=this.axis.get("depth"),r=this.axis.get("degree"),a=e.radian(360-r),this.scale=(this.axis,function(e,r,s,h){var o=t.typeCheck("integer",h)?h:1,c=n/o;if(void 0==s||1==o)return{x:i.axis.x(e),y:i.axis.y(r),depth:c};var u=c*(s=void 0==s?0:s),l=Math.sin(a)*c;return{x:i.axis.x(e)+Math.cos(a)*u,y:i.axis.y(r)+Math.sin(a)*u+l,depth:c}}),this.scale.depth=n,this.scale.degree=r,this.scale.radian=a},this.draw=function(){var t=this.axis.x.root,e=this.axis.y.root,r=Math.sin(a)*n,h=Math.cos(a)*n;return e.each(function(n,a){if("line"==a.element.nodeName)e.append(i.line({x1:h,y1:0,x2:h,y2:r+a.attributes.y2}));else{var o=s(t);a.append(i.line({x1:0,y1:0,x2:h,y2:r})),a.append(i.line({x1:h,y1:r,x2:h+o.x2,y2:r}))}}),t.each(function(t,r){var h="line"==r.element.nodeName?r.attributes:r.get(0).attributes,o=h.y1+Math.sin(a)*n,c=h.x1+Math.cos(a)*n;if(t>0){var u=s(e);r.append(i.line({x1:h.x1,y1:h.y1,x2:c,y2:o})),r.append(i.line({x1:c,y1:o,x2:c,y2:-(u.y2-o)}))}}),this.drawGrid()}};return i.setup=function(){return{domain:null}},i}},J={name:"chart.brush.core",extend:"chart.draw",component:function(){var t=r.a.include("util.base"),e=r.a.include("util.dom"),i=function(){this.drawAfter=function(t){!1!==this.brush.clip&&t.attr({"clip-path":"url(#"+this.axis.get("clipId")+")"}),t.attr({class:"brush-"+this.brush.type}),t.translate(this.chart.area("x"),this.chart.area("y"))},this.drawTooltip=function(t,e,i){var n=this,r=null;return{tooltip:r=n.chart.svg.group({visibility:"hidden"},function(){n.chart.text({fill:n.chart.theme("tooltipPointFontColor"),"font-size":n.chart.theme("tooltipPointFontSize"),"font-weight":n.chart.theme("tooltipPointFontWeight"),"text-anchor":"middle",opacity:i}),n.chart.svg.circle({r:n.chart.theme("tooltipPointRadius"),fill:t,stroke:e,opacity:i,"stroke-width":n.chart.theme("tooltipPointBorderWidth")})}),control:function(t,e,i,n){var a=r.get(0);a.element.textContent=n,"left"==t?a.attr({x:-7,y:4,"text-anchor":"end"}):"right"==t?a.attr({x:7,y:4,"text-anchor":"start"}):"bottom"==t?a.attr({y:16}):a.attr({y:-7}),r.attr({visibility:0!=n?"visible":"hidden"}),r.translate(e,i)},style:function(t,e,i){r.get(0).attr({opacity:i}),r.get(1).attr({fill:t,stroke:e,opacity:i})}}},this.curvePoints=function(t){var e=[],i=[],n=t.length-1,r=[],a=[],s=[],h=[];for(r[0]=0,a[0]=2,s[0]=1,h[0]=t[0]+2*t[1],o=1;o<n-1;o++)r[o]=1,a[o]=4,s[o]=1,h[o]=4*t[o]+2*t[o+1];r[n-1]=2,a[n-1]=7,s[n-1]=0,h[n-1]=8*t[n-1]+t[n];for(var o=1;o<n;o++){var c=r[o]/a[o-1];a[o]=a[o]-c*s[o-1],h[o]=h[o]-c*h[o-1]}e[n-1]=h[n-1]/a[n-1];for(o=n-2;o>=0;--o)e[o]=(h[o]-s[o]*e[o+1])/a[o];for(o=0;o<n-1;o++)i[o]=2*t[o+1]-e[o+1];return i[n-1]=.5*(t[n]+e[n-1]),{p1:e,p2:i}},this.eachData=function(e,i){if(t.typeCheck("function",e)){var n=this.listData();if(!0===i)for(var r=n.length-1;r>=0;r--)e.call(this,r,n[r]);else{var a=0;for(r=n.length;a<r;a++)e.call(this,n[a],a)}}},this.listData=function(){return this.axis&&this.axis.data?this.axis.data:[]},this.getData=function(t){return this.listData()[t]},this.getValue=function(t,e,i){return this.axis.getValue(t,e,i)},this.getXY=function(e){var i=[],n={},r=this.listData().length,a=r,s=this.brush.target,h=s.length;!1!==e&&(n=function(t,e){for(var i={},n={},r=0;r<e.length;r++)i[e[r]]||(n[e[r]]=[]);r=0;for(var a=t.length;r<a;r++){var s=t[r];for(var h in n)n[h].push(s[h])}for(var o in n)i[o]={min:Math.min.apply(Math,n[o]),max:Math.max.apply(Math,n[o])};return i}(this.axis.data,s));for(var o=0;o<h;o++)i[o]={x:new Array(r),y:new Array(r),value:new Array(r),min:[],max:[],length:r};var c=this.axis.data,u="range"==this.axis.y.type,l=this.axis.x,d=this.axis.y;return t.loop(a)(function(t,r){var a=c[t],o=0,f=0;u?o=l(t):f=d(t);for(var g=0;g<h;g++){var p=s[g],m=a[p];u?f=d(m):o=l(m),i[g].x[t]=o,i[g].y[t]=f,i[g].value[t]=m,!1!==e&&(i[g].min[t]=m==n[p].min,i[g].max[t]=m==n[p].max)}}),i},this.getStackXY=function(t){var e=this.getXY(t),i="range"==this.axis.y.type;return this.eachData(function(t,n){for(var r=0,a=0;a<this.brush.target.length;a++){var s=t[this.brush.target[a]];a>0&&(r+=t[this.brush.target[a-1]]),i?e[a].y[n]=this.axis.y(s+r):e[a].x[n]=this.axis.x(s+r)}}),e},this.addEvent=function(i,n,r){if(!0===this.brush.useEvent){var a=this.chart,s={};t.typeCheck("object",n)&&!r?(s.brush=this.brush,s.data=n):(s.brush=this.brush,s.dataIndex=n,s.dataKey=null!=r?this.brush.target[r]:null,s.data=null!=n?this.getData(n):null),i.on("click",function(t){h(t),a.emit("click",[s,t])}),i.on("dblclick",function(t){h(t),a.emit("dblclick",[s,t])}),i.on("contextmenu",function(t){h(t),a.emit("rclick",[s,t]),t.preventDefault()}),i.on("mouseover",function(t){h(t),a.emit("mouseover",[s,t])}),i.on("mouseout",function(t){h(t),a.emit("mouseout",[s,t])}),i.on("mousemove",function(t){h(t),a.emit("mousemove",[s,t])}),i.on("mousedown",function(t){h(t),a.emit("mousedown",[s,t])}),i.on("mouseup",function(t){h(t),a.emit("mouseup",[s,t])})}function h(t){var i=e.offset(a.root),n=t.pageX-i.left,r=t.pageY-i.top;t.bgX=n,t.bgY=r,t.chartX=n-a.padding("left"),t.chartY=r-a.padding("top")}},this.color=function(e,i){var n=this.brush.colors,r=null,a=0,s=0;if(t.typeCheck("undefined",i)?a=e:(a=i,s=e),t.typeCheck("function",n)){var h=n.call(this.chart,this.getData(s),s);r=t.typeCheck(["string","integer"],h)?this.chart.color(h):t.typeCheck("array",h)?this.chart.color(a,h):this.chart.color(0)}else r=this.chart.color(a,n);return r},this.offset=function(t,e){var i=this.axis[t](e);return"block"!=this.axis[t].type&&(i+=this.axis[t].rangeBand()/2),i}};return i.setup=function(){return{target:null,colors:null,axis:0,index:null,clip:!0,useEvent:!0}},i}},Q={name:"chart.brush.canvas.core",extend:"chart.brush.core",component:function(){var t=r.a.include("util.base");return function(){this.addPolygon=function(e,i){t.typeCheck("array",this.polygons)||(this.polygons=[]),this.calculate3d(e),this.polygons.push({polygon:e,order:this.axis.depth-e.max().z,handler:i})},this.drawAfter=function(){if(t.typeCheck("array",this.polygons)){var e=this.polygons;e.sort(function(t,e){return t.order-e.order});for(var i=0,n=e.length;i<n;i++){var r=e.shift();r.handler.call(this,r.polygon)}}}}}},K={name:"chart.widget.core",extend:"chart.draw",component:function(){var t=r.a.include("util.base"),e=function(){this.getIndexArray=function(e){var i=[0];return t.typeCheck("array",e)?i=e:t.typeCheck("integer",e)&&(i=[e]),i},this.getScaleToValue=function(t,e,i,n,r){var a=r-(r-n)/(10*(i-e))*((t-e)/.1);return a<n?n:a>r?r:a},this.getValueToScale=function(t,e,i,n,r){return parseFloat((n+(i-t)/((i-e)/(10*(r-n)))*.1).toFixed(1))},this.isRender=function(){return!0===this.widget.render},this.on=function(e,i,n){var r=this;return this.chart.on(e,function(){if(t.startsWith(e,"axis.")&&t.typeCheck("integer",n)){var a=r.chart.axis(n),s=arguments[0];t.typeCheck("object",a)&&arguments[1]==n&&i.apply(r,[s])}else i.apply(r,arguments)},this.isRender()?"render":"renderAll")},this.drawAfter=function(t){t.attr({class:"widget-"+this.widget.type})}};return e.setup=function(){return{render:!1,index:0}},e}};r.a.use([a,s,h,o,c,u,l,d,f,g,p,m,v,{name:"util.scale.circle",extend:null,component:function(){return function(){var t=[],e=[],i=0;function n(t){}return n.domain=function(e){if(void 0===e)return t;for(var i=0;i<e.length;i++)t[i]=e[i];return this},n.range=function(t){if(void 0===t)return e;for(var i=0;i<t.length;i++)e[i]=t[i];return this},n.rangePoints=function(r,a){a=a||0;for(var s=t.length,h=(r[1]-r[0]-a)/s,o=[],c=0;c<t.length;c++)o[c]=0==c?r[0]+a/2+h/2:o[c-1]+h;return e=o,i=h,n},n.rangeBands=function(r,a,s){a=a||0,s=s||0;for(var h=t.length-1,o=(r[1]-r[0])/h,c=[],u=0;u<t.length;u++)c[u]=0==u?r[0]:o+c[u-1];return i=o,e=c,n},n.rangeBand=function(){return i},n}}},x,y,w,b,k,C,M,T,A,z,B,F,L,D,S,j,P,R,Y,O,I,X,N,W,G,E,V,H,U,Z,q,J,{name:"chart.brush.map.core",extend:"chart.brush.core",component:function(){return function(){}}},{name:"chart.brush.polygon.core",extend:"chart.brush.core",component:function(){var t=function(){this.createPolygon=function(t,e){this.calculate3d(t);var i=e.call(this,t);if(i)return i.order=this.axis.depth-t.max().z,i}};return t.setup=function(){return{id:null,clip:!1}},t}},Q,K,{name:"chart.widget.map.core",extend:"chart.widget.core",component:function(){var t=function(t,e,i){};return t.setup=function(){return{axis:0}},t}},{name:"chart.widget.polygon.core",extend:"chart.widget.core",component:function(){return function(){this.drawAfter=function(t){}}}},{name:"chart.widget.canvas.core",extend:"chart.widget.core",component:function(){return function(){this.drawAfter=function(t){}}}}]);var tt=r.a;window.jui=window.JUI=tt}]);